<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <title>Privacy Policy - Note Pad - Modern Online Notepad, Whiteboard & To-Do List</title>
    
    <meta name="description" content="Read the Privacy Policy for Note Pad to understand how your data is collected, used, and protected. Your privacy is our priority."/>
    
    <meta name="keywords" content="privacy policy, data privacy, data security, Note Pad privacy, personal data, local storage"/>
    
    <meta name="author" content="Bishal Mishra">
    <meta name="robots" content="index, follow"> 

    <link rel="canonical" href="https://bishalmishra.com/privacy-policy.html">

    <meta property="og:title" content="Privacy Policy - Note Pad - Modern Online Notepad, Whiteboard & To-Do List" />
    <meta property="og:description" content="Read the Privacy Policy for Note Pad to understand how your data is collected, used, and protected." />
    <meta property="og:image" content="https://i.imgur.com/kR1k1jU.png" />
    <meta property="og:url" content="https://bishalmishra.com/privacy-policy.html" />
    <meta property="og:type" content="website" />
    
    <meta name="msvalidate.01" content="F28FD042305E7D060B4355FA59E662D8" />
    <link rel="manifest" href="manifest.json">
        
    <meta name="yandex-verification" content="af349c5874d738ed" />
   
    <link rel="icon" type="image/png" href="images/favicon.png"> 

    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- AdSense SCRIPT (typically in HEAD) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3010913100191778"
         crossorigin="anonymous"></script>
    <!-- End AdSense SCRIPT -->
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-light: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            --text-light: #333;
            --card-light: #ffffff;
            --shadow-light: rgba(0, 0, 0, 0.08);

            --bg-dark: linear-gradient(120deg, #2b2b2b 0%, #1e1e1e 100%);
            --text-dark: #e0e0e0;
            --card-dark: #2c2c2c;
            --shadow-dark: rgba(0, 0, 0, 0.25);
           
            --primary: #8c53ff;
            --primary-dark: #7042cc;
            --primary-light-transparent: rgba(140, 83, 255, 0.1);
            --radius: 12px;
        }

        html { height: 100%; scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg-light); color: var(--text-light); line-height: 1.6; transition: background 0.5s ease, color 0.5s ease; display: flex; flex-direction: column; min-height: 100vh; }
        body.dark { background: var(--bg-dark); color: var(--text-dark); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        main.container { width: 95%; max-width: 1200px; margin: 20px auto; flex-grow: 1; padding-bottom: 40px; } 

        /* START: MODIFIED HEADER STYLES */
        header { 
            background: var(--primary); 
            color: white; 
            padding: 15px 5%; 
            box-shadow: 0 4px 15px var(--shadow-light); 
            z-index: 10; 
            display: flex; 
            justify-content: space-between;
            align-items: center; 
            position: relative;
        }

        .header-left, .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
        }
        
        .header-left {
            justify-content: flex-start;
        }

        .header-right {
            justify-content: flex-end;
        }

        .header-content { 
            text-align: center; 
            flex-grow: 0;
        }
        body.dark header { box-shadow: 0 4px 15px var(--shadow-dark); }
        /* END: MODIFIED HEADER STYLES */

        footer { margin-top: auto; padding: 20px; text-align: center; background: var(--primary); color: white; box-shadow: 0 4px 15px var(--shadow-light); }
        body.dark footer { background: var(--card-dark); color: var(--text-dark); box-shadow: 0 4px 15px var(--shadow-dark); }
        footer a { color: #fff; font-weight: 600; text-decoration: none; transition: opacity 0.2s; margin: 0 10px;  }
        body.dark footer a { color: var(--primary); }
        footer a:hover { opacity: 0.8; text-decoration: underline; }
        footer p { margin-bottom: 10px; } 
        
        .sidenav { height: 100%; width: 0; position: fixed; z-index: 1002; top: 0; left: 0; overflow-x: hidden; transition: 0.5s; padding-top: 60px; background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px); }
        body.dark .sidenav { background-color: rgba(30, 30, 30, 0.95); }
        .sidenav a { padding: 10px 15px 10px 32px; text-decoration: none; font-size: 20px; font-weight: 600; color: var(--text-light); display: block; transition: 0.3s; }
        body.dark .sidenav a { color: var(--text-dark); }
        .sidenav a:hover { color: var(--primary); }
        .sidenav .closebtn { position: absolute; top: 10px; right: 25px; font-size: 36px; margin-left: 50px; }
        
        .open-nav-btn { font-size: 28px; cursor: pointer; color: white; transition: transform 0.2s; }
        .open-nav-btn:hover { transform: scale(1.1); }
        
        /* START: CLOCK AND WEATHER STYLES */
        #live-clock, #live-weather {
            color: white;
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
        }
        #live-clock {
            font-family: 'Inter', sans-serif;
        }
        #live-weather i:first-child {
            margin-right: 8px;
            color: #ffc107;
        }
        #weather-refresh-btn {
            margin-left: 10px;
            cursor: pointer;
            transition: color 0.2s ease, transform 0.2s ease;
            display: inline-block;
        }
        #weather-refresh-btn:hover {
            color: #ffc107;
            transform: scale(1.2) rotate(90deg);
        }
        /* END: CLOCK AND WEATHER STYLES */

        #privacy-policy-section { background: var(--card-light); padding: 25px; border-radius: var(--radius); box-shadow: 0 4px 15px var(--shadow-light); margin-bottom: 25px; text-align: left; }
        body.dark #privacy-policy-section { background: var(--card-dark); box-shadow: 0 4px 15px var(--shadow-dark); }
       
        h2, h3 { font-size: 24px; margin-bottom: 20px; color: var(--primary); text-align: center; }
        #privacy-policy-section h3 { text-align: left;  } 
        #privacy-policy-section p, #privacy-policy-section ul { margin-bottom: 15px; }
        #privacy-policy-section ul { list-style: disc; padding-left: 25px; }
        #privacy-policy-section ul li { margin-bottom: 10px; }
        #privacy-policy-section h4 { font-size: 1.2em; color: var(--primary-dark); margin-top: 25px; margin-bottom: 10px; }
        body.dark #privacy-policy-section h4 { color: var(--primary); }
        #privacy-policy-section a { color: var(--primary); font-weight: 600; text-decoration: none; }
        #privacy-policy-section a:hover { text-decoration: underline; color: var(--primary-dark); }

        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .profile-container { position: relative; z-index: 999; }
        #profile-icon { width: 42px; height: 42px; border-radius: 50%; cursor: pointer; border: 2px solid #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.2); transition: transform 0.2s ease-in-out; object-fit: cover; }
        #profile-icon:hover, #profile-icon:focus { transform: scale(1.1); }
        .profile-dropdown { position: absolute; top: 55px; right: 0; width: 260px; background: var(--card-light); border-radius: var(--radius); box-shadow: 0 8px 25px var(--shadow-light); border: 1px solid #eee; overflow: hidden; animation: fadeIn 0.3s ease; transition: opacity 0.3s ease, transform 0.3s ease; }
        body.dark .profile-dropdown { background: var(--card-dark); box-shadow: 0 8px 25px var(--shadow-dark); border-color: #444; }
        .dropdown-header { display: flex; align-items: center; gap: 15px; padding: 15px; border-bottom: 1px solid #f0f0f0; }
        body.dark .dropdown-header { border-bottom-color: #444; }
        .dropdown-header img { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; }
        .dropdown-header span { font-weight: 600; font-size: 16px; word-break: break-all; }
        body.dark .dropdown-header small { color: #bbb !important; }
        .dropdown-menu { list-style: none; padding: 10px 0; margin: 0; }
        .dropdown-menu li a { display: flex; align-items: center; gap: 12px; padding: 12px 20px; text-decoration: none; color: var(--text-light); font-size: 14px; transition: background-color 0.2s ease; }
        body.dark .dropdown-menu li a { color: var(--text-dark); }
        .dropdown-menu li a:hover { background-color: #f5f5f5; }
        body.dark .dropdown-menu li a:hover { background-color: #3e3e3e; }
        .dropdown-menu li.divider { height: 1px; margin: 8px 0; background: #e0e0e0; }
        body.dark .dropdown-menu li.divider { background: #444; }
        #emailVerifiedStatus .fa-check-circle { color: #28a745; } 
        #emailVerifiedStatus .fa-times-circle { color: #dc3545; } 
        
        .modal { display: none; }
        #goToTopBtn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background-color: var(--primary); color: white; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; display: none; z-index: 1000; box-shadow: 0 4px 12px var(--shadow-light); transition: all 0.3s ease-in-out; display: flex; align-items: center; justify-content: center; } 
        #goToTopBtn:hover { background-color: var(--primary-dark); transform: scale(1.1); } 
        body.dark #goToTopBtn { box-shadow: 0 4px 12px var(--shadow-dark); } 
        .confetti { display: none !important; }
        
        /* --- MEDIA QUERIES --- */
        @media (min-width: 1024px) {
            .open-nav-btn { position: relative; left: auto; top: auto; transform: none; }
            .profile-container { position: relative; top: auto; right: auto; margin-left: 0; }
        }
        @media (max-width: 992px) {
            #live-clock, #live-weather { display: none; }
        }
        @media (max-width: 768px) { 
            .sidenav a { font-size: 18px; }
            h2, h3 { font-size: 20px; }
        }
        @media (max-width: 480px) {
            .profile-container { position: fixed; top: 10px; right: 10px; }
            .open-nav-btn { position: absolute; left: 5%; top: 50%; transform: translateY(-50%); }
        }
    </style>
</head>
<body>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
  <a href="index.html" onclick="closeNav()">Home</a>
  <a href="about.html" onclick="closeNavAndGoTo('about.html')">About</a>
  <a href="blogs.html" onclick="closeNavAndGoTo('blogs.html')">Blog</a>
  <a href="privacy-policy.html" onclick="closeNavAndGoTo('privacy-policy.html')">Privacy Policy</a>
  <a href="terms-of-service.html" onclick="closeNavAndGoTo('terms-of-service.html')">Terms of Service</a>
  <a href="disclaimer.html" onclick="closeNavAndGoTo('disclaimer.html')">Disclaimer</a>
  <a href="404.html" onclick="closeNavAndGoTo('404.html')">404 Page</a>
  <a href="contact.html" onclick="closeNavAndGoTo('contact.html')">Contact</a>
</div>

<!-- START: MODIFIED HEADER HTML STRUCTURE -->
<header>
    <div class="header-left">
        <span class="open-nav-btn" onclick="openNav()">☰</span>
        <span id="live-clock"></span>
    </div>

    <div class="header-content">
        <h1>
            <a href="index.html" style="text-decoration: none; color: inherit;">
                📝 NOTE_<span style="color:#ffc107">P@D</span>
            </a>
        </h1>
        <p style="margin-top: 5px; font-weight: 300; opacity: 0.9;">Notepad, Whiteboard, and To-Do List</p>
    </div>

    <div class="header-right">
        <span id="live-weather"><i class="fas fa-spinner fa-spin"></i> Loading...</span>
        <div id="profile-container" class="profile-container hidden">
            <img id="profile-icon" src="https://ui-avatars.com/api/?name=U" alt="Profile" tabindex="0" width="42" height="42">
            <div id="profile-dropdown" class="profile-dropdown hidden">
                <div class="dropdown-header">
                    <img id="userPic" src="https://ui-avatars.com/api/?name=U&background=random&color=fff" alt="Profile" width="48" height="48"> 
                    <div>
                        <span id="userNameDisplay">User Name</span>
                        <small id="userEmailDisplay" style="color: #888; display: block; font-weight: 400;"></small>
                    </div>
                </div>
                <ul class="dropdown-menu">
                    <li><a href="#" id="editProfilePhotoBtn"><i class="fas fa-camera fa-fw"></i> Edit Profile Photo</a></li>
                    <li><a href="#" id="verifyEmailBtn"><i class="fas fa-envelope fa-fw"></i> Verify Email <span id="emailVerifiedStatus"></span></a></li>
                    <li><a href="#" id="resetPasswordBtn"><i class="fas fa-key fa-fw"></i> Reset Password</a></li>
                    <li class="divider"></li>
                    <li><a href="#" id="manageAccountBtn"><i class="fas fa-user-cog fa-fw"></i> Manage Account</a></li> 
                    <li class="divider"></li>
                    <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt fa-fw"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
</header>
<!-- END: MODIFIED HEADER HTML STRUCTURE -->
<input type="file" id="photoUpload" class="hidden" accept="image/*">

<main id="main-container" class="container">
    <div id="privacy-policy-section" class="info-section">
        <h3>Privacy Policy for Note P@d</h3>
        <p><strong>Last Updated:</strong> July 25, 2025</p>
        
        <p>Welcome to Note P@d ("us", "we", or "our"). We are committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website [www.bishalmishra.com] (the "Site") and use our services (the "Services"). Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the site.</p>

        <h4>1. Information We Collect</h4>
        <p>We may collect information about you in a variety of ways:</p>
        <ul>
            <li><strong>Personal Data (for Account Holders):</strong> If you register for an account, we may collect personally identifiable information, such as your name, email address, and profile picture if you provide one or sign in via Google. For premium services, payment information may be processed by third-party payment processors (e.g., Esewa), and we may receive transaction confirmation details but not your full financial details.</li>
            <li><strong>Locally Stored Data (Anonymous Use):</strong> For users not signed in, all notes, titles, whiteboard content, and to-do lists are stored directly in your browser's localStorage. This data is not transmitted to our servers.</li>
            <li><strong>Derivative Data:</strong> Information our servers automatically collect when you access the Site (if applicable, e.g., IP address, browser type, access times), primarily for security and operational purposes. This is typically anonymized or aggregated.</li>
            <li><strong>Cookies and Web Beacons:</strong> We may use cookies, web beacons, tracking pixels, and other tracking technologies on the Site to help customize the Site and improve your experience. Basic cookies are used for session management (e.g., dark mode preference, login status). You can remove or reject cookies through your browser settings.</li>
        </ul>

        <h4>2. Use of Your Information</h4>
        <p>Having accurate information permits us to provide you with a smooth, efficient, and customized experience. Specifically, we may use information collected about you via the Site or our Services to:</p>
        <ul>
            <li>Create and manage your account.</li>
            <li>Provide the core functionalities of Note P@d (notepad, whiteboard, to-do list, calendar).</li>
            <li>Process payments and refunds (for premium features).</li>
            <li>Email you regarding your account or order.</li>
            <li>Enable user-to-user communications (if such features are implemented).</li>
            <li>Improve our website and services.</li>
            <li>Monitor and analyze usage and trends to improve your experience with the Site.</li>
            <li>Notify you of updates to the Site or Services.</li>
            <li>Offer new products, services, and/or recommendations to you (with your consent where required).</li>
            <li>Prevent fraudulent transactions, monitor against theft, and protect against criminal activity.</li>
            <li>Resolve disputes and troubleshoot problems.</li>
            <li>Respond to product and customer service requests.</li>
        </ul>

        <h4>3. Disclosure of Your Information</h4>
        <p>We do not share, sell, rent, or trade your personally identifiable information with third parties for their marketing purposes without your explicit consent. We may share information we have collected about you in certain situations:</p>
        <ul>
            <li><strong>By Law or to Protect Rights:</strong> If we believe the release of information about you is necessary to respond to legal process, to investigate or remedy potential violations of our policies, or to protect the rights, property, and safety of others, we may share your information as permitted or required by any applicable law, rule, or regulation.</li>
            <li><strong>Third-Party Service Providers:</strong> We may share your information with third parties that perform services for us or on our behalf, including payment processing (Esewa for manual payments, Google for Google Sign-In), data analysis, email delivery, hosting services, and customer service.</li>
            <li><strong>Business Transfers:</strong> We may share or transfer your information in connection with, or during negotiations of, any merger, sale of company assets, financing, or acquisition of all or a portion of our business to another company.</li>
            <li><strong>With Your Consent:</strong> We may disclose your personal information for any other purpose with your consent.</li>
        </ul>
        <p><strong>Note on Google Sign-In:</strong> If you sign in using Google, we receive profile information from Google as per their policies and your privacy settings with them. We use this information solely for account creation and display within your profile on Note P@d.</p>


        <h4>4. Security of Your Information</h4>
        <p>We use administrative, technical, and physical security measures to help protect your personal information. While we have taken reasonable steps to secure the personal information you provide to us, please be aware that despite our efforts, no security measures are perfect or impenetrable, and no method of data transmission can be guaranteed against any interception or other type of misuse. For data stored locally in your browser, the security is dependent on the security of your own device and browser.</p>

        <h4>5. Policy for Children</h4>
        <p>We do not knowingly solicit information from or market to children under the age of 13 (or higher age as required by applicable law). If you become aware of any data we have collected from children under age 13, please contact us using the contact information provided below.</p>

        <h4>6. Your Data Rights (e.g., GDPR, CCPA if applicable)</h4>
        <p>Depending on your location, you may have certain rights regarding your personal data, such as the right to access, correct, delete, or restrict the processing of your data. To exercise these rights, please contact us. We will respond to your request within a reasonable timeframe as required by law.</p>
        
        <h4>7. Changes to This Privacy Policy</h4>
        <p>We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date. You are advised to review this Privacy Policy periodically for any changes.</p>

        <h4>8. Contact Us</h4>
        <p>If you have questions or comments about this Privacy Policy, please contact us using the details in the <a href="contact.html">Contact Us</a> section of this website.</p>
        
    </div>
</main>

<div id="authModal" class="modal hidden"> <div class="modal-content"> <h2 id="authTitle">Sign In to Note P@d</h2> <input type="text" id="authUsername" placeholder="Username (Email)" autocomplete="username"/> <input type="password" id="authPassword" placeholder="Password" autocomplete="current-password"/> <button id="authSubmit">Sign In</button> <div id="googleSignInDiv" style="margin: 20px auto 0; display: flex; justify-content: center;"></div> <a href="#" id="forgotPassword">Forgot Password?</a> <p id="switchMode">Don't have an account? <a href="#">Sign Up</a></p> </div> </div>
<button id="goToTopBtn" title="Go to top" aria-label="Go to top">↑</button>
<div id="confetti" class="confetti hidden">🎉</div>
<audio id="loginSound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>

<footer>
   <p>Copyright © <span id="currentYear"></span> <a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Bishal Mishra</a> | All Rights Reserved.</p>
   <div>
        <a href="privacy-policy.html">Privacy Policy</a> |
        <a href="terms-of-service.html">Terms of Service</a> |
        <a href="disclaimer.html">Disclaimer</a> |
        <a href="contact.html">Contact Us</a>
   </div>
</footer>

<script>
let isSignUp = false;

const goToTopBtn = document.getElementById('goToTopBtn');
const authModal = document.getElementById('authModal');
const profileContainer = document.getElementById('profile-container');
const profileIcon = document.getElementById('profile-icon');
const profileDropdown = document.getElementById('profile-dropdown');

function openNav() { document.getElementById("mySidenav").style.width = "280px"; }
function closeNav() { document.getElementById("mySidenav").style.width = "0"; }
function closeNavAndGoTo(url) { closeNav(); setTimeout(() => window.location.href = url, 300); }

document.addEventListener("DOMContentLoaded", () => {
    loadDarkMode();
    updateClock(); 
    setInterval(updateClock, 1000); 
    fetchWeather();
    checkAuthStatus(); 
    attachEventListeners();
    document.getElementById('currentYear').textContent = new Date().getFullYear();
});

window.onload = function() {
    if (document.getElementById('googleSignInDiv')) {
        if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
            initGoogleSignIn();
        } else {
            let attempts = 0;
            const intervalId = setInterval(() => {
                attempts++;
                if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
                    initGoogleSignIn();
                    clearInterval(intervalId);
                } else if (attempts > 20) {
                    console.error("Google Sign-In failed to initialize.");
                    if(document.getElementById('googleSignInDiv')) document.getElementById('googleSignInDiv').innerHTML = "Google Sign-In failed to load.";
                    clearInterval(intervalId);
                }
            }, 500);
        }
    }
};

function attachEventListeners() {
    window.onscroll = () => { if (goToTopBtn) goToTopBtn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "flex" : "none"; };
    if (goToTopBtn) goToTopBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
    if (profileIcon) profileIcon.addEventListener('click', toggleProfileDropdown);
    document.addEventListener('click', closeDropdownOnClickOutside);
    ['logoutBtn', 'verifyEmailBtn', 'resetPasswordBtn', 'manageAccountBtn', 'editProfilePhotoBtn', 'photoUpload', 'authSubmit', 'switchMode'].forEach(id => {
        const el = document.getElementById(id);
        if (el) {
            if (id === 'photoUpload') el.addEventListener('change', handlePhotoUpload);
            else el.addEventListener('click', (e) => {
                e.preventDefault();
                if (id === 'logoutBtn') handleLogout(e);
                else if (id === 'verifyEmailBtn') handleVerifyEmail(e);
                else if (id === 'resetPasswordBtn') handleResetPassword(e);
                else if (id === 'manageAccountBtn') handleManageAccount(e);
                else if (id === 'editProfilePhotoBtn') document.getElementById('photoUpload')?.click();
                else if (id === 'authSubmit') handleAuthSubmit();
                else if (id === 'switchMode') {
                    isSignUp = !isSignUp;
                    const authTitle = document.getElementById('authTitle');
                    const authSubmitBtn = document.getElementById('authSubmit');
                    if(authTitle) authTitle.textContent = isSignUp ? "Create Account" : "Sign In";
                    if(authSubmitBtn) authSubmitBtn.textContent = isSignUp ? "Sign Up" : "Sign In";
                    el.innerHTML = isSignUp ? 'Have an account? <a href="#">Sign In</a>' : 'No account? <a href="#">Sign Up</a>';
                }
            });
        }
    });
    document.body.addEventListener('click', (event) => { if (event.target && event.target.id === 'weather-refresh-btn') { const icon = event.target; icon.classList.add('fa-spin'); fetchWeather(); } });
}

function updateClock() { const clockElement = document.getElementById('live-clock'); if (!clockElement) return; const now = new Date(); let hours = now.getHours(); const minutes = now.getMinutes().toString().padStart(2, '0'); const seconds = now.getSeconds().toString().padStart(2, '0'); const ampm = hours >= 12 ? 'PM' : 'AM'; hours = hours % 12; hours = hours ? hours : 12; clockElement.textContent = `${hours}:${minutes}:${seconds} ${ampm}`; }
function getWeatherIconClass(id) { if (id >= 200 && id < 300) return 'fas fa-bolt'; if (id >= 300 && id < 400) return 'fas fa-cloud-rain'; if (id >= 500 && id < 600) return 'fas fa-cloud-showers-heavy'; if (id >= 600 && id < 700) return 'fas fa-snowflake'; if (id >= 700 && id < 800) return 'fas fa-smog'; if (id === 800) return 'fas fa-sun'; if (id === 801) return 'fas fa-cloud-sun'; if (id > 801 && id < 805) return 'fas fa-cloud'; return 'fas fa-question-circle'; }
function fetchWeatherData(lat, lon) { const weatherElement = document.getElementById('live-weather'); const apiKey = '6c6f3b5d9306e38909bea9a6b45a3e74'; const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`; fetch(apiUrl).then(res => { if (!res.ok) throw new Error(`API Error: ${res.statusText}`); return res.json(); }).then(data => { if (!data.main || !data.weather || !data.weather[0] || !data.name) throw new Error('Invalid data from API'); const temp = Math.round(data.main.temp); const icon = getWeatherIconClass(data.weather[0].id); weatherElement.innerHTML = `<i class="${icon}"></i> ${data.name}: ${temp}°C <i id="weather-refresh-btn" class="fas fa-sync-alt" title="Refresh weather"></i>`; }).catch(err => { console.error('Error fetching weather:', err); weatherElement.innerHTML = `<i class="fas fa-times-circle"></i> Weather unavailable <i id="weather-refresh-btn" class="fas fa-sync-alt" title="Retry"></i>`; }); }
function fetchWeather() { const el = document.getElementById('live-weather'); if (!el) return; if (!document.getElementById('weather-refresh-btn')?.classList.contains('fa-spin')) el.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Fetching...`; if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(pos => fetchWeatherData(pos.coords.latitude, pos.coords.longitude), () => fetchWeatherData(27.7172, 85.3240), { timeout: 10000 }); } else { fetchWeatherData(27.7172, 85.3240); } }
function toggleProfileDropdown() { if(profileDropdown) profileDropdown.classList.toggle('hidden'); }
function closeDropdownOnClickOutside(event) { if (profileContainer && !profileContainer.contains(event.target) && profileDropdown && !profileDropdown.classList.contains('hidden')) profileDropdown.classList.add('hidden'); }
function checkAuthStatus() { const userId = localStorage.getItem('currentUserId'); if (userId) showUserInfo(); else if (profileContainer) profileContainer.classList.add('hidden'); }
function showUserInfo() { const username = localStorage.getItem('currentUser'); const picUrl = localStorage.getItem('userPic'); const email = localStorage.getItem('userEmail'); const isVerified = localStorage.getItem('emailVerified') === 'true'; if (!username || !profileContainer) return; profileContainer.classList.remove('hidden'); const avatarUrl = picUrl || `https://ui-avatars.com/api/?name=${encodeURIComponent(username.substring(0,2))}&background=random&color=fff&size=48`; const profileIconEl = document.getElementById('profile-icon'); const userPicEl = document.getElementById('userPic'); const userNameDisplayEl = document.getElementById('userNameDisplay'); const userEmailDisplayEl = document.getElementById('userEmailDisplay'); const emailVerifiedStatusEl = document.getElementById('emailVerifiedStatus'); const verifyEmailBtnEl = document.getElementById('verifyEmailBtn'); const resetPasswordBtnEl = document.getElementById('resetPasswordBtn'); if(profileIconEl) profileIconEl.src = avatarUrl; if(userPicEl) userPicEl.src = avatarUrl; if(userNameDisplayEl) userNameDisplayEl.textContent = username; if(userEmailDisplayEl) userEmailDisplayEl.textContent = email || ''; if (emailVerifiedStatusEl) { emailVerifiedStatusEl.innerHTML = isVerified ? '<i class="fas fa-check-circle" title="Verified"></i>' : '<i class="fas fa-times-circle" title="Not Verified"></i>'; } if(verifyEmailBtnEl) { verifyEmailBtnEl.style.opacity = isVerified ? '0.6' : '1'; verifyEmailBtnEl.style.cursor = isVerified ? 'default' : 'pointer'; } if (localStorage.getItem('authProvider') === 'google') { if(resetPasswordBtnEl) resetPasswordBtnEl.parentElement.style.display = 'none'; if(isVerified && verifyEmailBtnEl) verifyEmailBtnEl.parentElement.style.display = 'none'; } else { if(resetPasswordBtnEl) resetPasswordBtnEl.parentElement.style.display = 'block'; } }
function handleLogout(e) { if(e) e.preventDefault(); localStorage.clear(); if (typeof google !== 'undefined' && google.accounts && google.accounts.id) google.accounts.id.disableAutoSelect(); if(profileContainer) profileContainer.classList.add('hidden'); if(authModal) authModal.classList.remove('hidden'); }
function handlePhotoUpload(event) { const file = event.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (e) => { localStorage.setItem('userPic', e.target.result); showUserInfo(); alert("Photo updated!"); }; reader.readAsDataURL(file); }
function handleVerifyEmail(e) { e.preventDefault(); alert("Email verification logic goes here."); }
function handleResetPassword(e) { e.preventDefault(); alert("Password reset logic goes here."); }
function handleManageAccount(e) { e.preventDefault(); alert("Account management logic goes here."); }
function handleAuthSubmit() { alert("Authentication logic goes here."); }
function initGoogleSignIn() { try { if (!google || !google.accounts || !google.accounts.id) { console.error("GSI lib not loaded."); return; } google.accounts.id.initialize({ client_id: "107788525119-7mkm9t2pqe53q85ltenn4lr3av7itdfh.apps.googleusercontent.com", callback: handleGoogleSignIn }); const btnContainer = document.getElementById("googleSignInDiv"); if (btnContainer) google.accounts.id.renderButton(btnContainer, { theme: "outline", size: "large", shape: "pill", width: "300" }); } catch (error) { console.error("GSI init failed.", error); } }
function jwtDecode(token) { try { return JSON.parse(atob(token.split('.')[1])); } catch (e) { console.error("JWT decode failed", e); return null; } }
function handleGoogleSignIn(response) { const data = jwtDecode(response.credential); if (!data) return; localStorage.setItem("currentUser", data.name || data.email); localStorage.setItem("currentUserId", data.sub); localStorage.setItem("userPic", data.picture || ""); localStorage.setItem('authProvider', 'google'); localStorage.setItem('userEmail', data.email); localStorage.setItem('emailVerified', (data.email_verified === true || data.email_verified === 'true').toString()); showUserInfo(); if(authModal) authModal.classList.add('hidden'); }
function loadDarkMode() { if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark'); }
</script>
</body>
</html>
