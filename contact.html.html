<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <title>Contact the Note Pad Team | Support, Feedback & Inquiries</title>
    <meta name="description" content="Get in touch with the Note Pad team. Contact us for technical support, partnerships, feedback, or any other inquiries. We're here to help!"/>
    <meta name="keywords" content="contact note pad, note pad support, contact bishal mishra, note pad feedback, technical support, online notepad help"/>
    <meta name="author" content="Bishal Mishra">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://bishalmishra.com/contact.html">

    <!-- Open Graph Data -->
    <meta property="og:title" content="Contact the Note Pad Team | Support, Feedback & Inquiries" />
    <meta property="og:description" content="Contact Note Pad for support, feedback, or inquiries. Get in touch with Bishal Mishra, the developer." />
    <meta property="og:image" content="https://i.imgur.com/kR1k1jU.png" />
    <meta property="og:url" content="https://bishalmishra.com/contact.html" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Note Pad" />
    
    <!-- Verification -->
    <meta name="msvalidate.01" content="F28FD042305E7D060B4355FA59E662D8" />
    <meta name="yandex-verification" content="af349c5874d738ed" />
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="images/favicon.png"> 

    <!-- SEO: JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Note Pad",
      "url": "https://bishalmishra.com/",
      "logo": "https://i.imgur.com/kR1k1jU.png",
      "contactPoint": [{
          "@type": "ContactPoint", "telephone": "+977-9827801575", "contactType": "customer service"
      },{
          "@type": "ContactPoint", "telephone": "+977-9828138995", "contactType": "technical support"
      }],
      "sameAs": ["https://www.facebook.com/share/19LTBhKXuy/?mibextid=wwXIfr", "https://bishalmishra.com"],
      "address": { "@type": "PostalAddress", "streetAddress": "Kirtipur", "addressLocality": "Kathmandu", "postalCode": "44618", "addressCountry": "NP" }
    }
    </script>
    
    <!-- Scripts & Fonts -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3010913100191778" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* ORIGINAL COLORS */
            --bg-light: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            --text-light: #333;
            --card-light: #ffffff;
            --shadow-light: rgba(0, 0, 0, 0.08);

            --bg-dark: linear-gradient(120deg, #2b2b2b 0%, #1e1e1e 100%);
            --text-dark: #e0e0e0;
            --card-dark: #2c2c2c;
            --shadow-dark: rgba(0, 0, 0, 0.25);
           
            --primary: #8c53ff; /* Original Purple */
            --primary-dark: #7042cc;
            --primary-light-transparent: rgba(140, 83, 255, 0.1);
            --radius: 12px;
            --success: #28a745;
            --danger: #dc3545;
            --success-bg: rgba(40, 167, 69, 0.1);
            --danger-bg: rgba(220, 53, 69, 0.1);
        }

        /* --- Base & Layout --- */
        html { height: 100%; scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg-light); color: var(--text-light); line-height: 1.7; transition: background 0.5s ease, color 0.5s ease; display: flex; flex-direction: column; min-height: 100vh; }
        body.dark { background: var(--bg-dark); color: var(--text-dark); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        main { flex-grow: 1; }

        /* ****** HEADER RESTORED TO ORIGINAL ****** */
        header { 
            background: var(--primary); 
            color: white; 
            padding: 15px 5%; 
            box-shadow: 0 4px 15px var(--shadow-light); 
            z-index: 10; 
            display: flex; 
            justify-content: space-between;
            align-items: center; 
            position: relative;
        }
        .header-left, .header-right { display: flex; align-items: center; gap: 20px; flex: 1; }
        .header-left { justify-content: flex-start; }
        .header-right { justify-content: flex-end; }
        .header-content { text-align: center; flex-grow: 0; }
        body.dark header { box-shadow: 0 4px 15px var(--shadow-dark); }
        .open-nav-btn { font-size: 28px; cursor: pointer; color: white; transition: transform 0.2s; }
        #live-clock, #live-weather { color: white; font-size: 16px; font-weight: 600; white-space: nowrap; }
        #live-weather i:first-child { margin-right: 8px; color: #ffc107; }
        #weather-refresh-btn { margin-left: 10px; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; display: inline-block; }
        #weather-refresh-btn:hover { color: #ffc107; transform: scale(1.2) rotate(90deg); }

        /* ****** FOOTER RESTORED TO ORIGINAL ****** */
        footer { margin-top: auto; padding: 20px; text-align: center; background: var(--primary); color: white; box-shadow: 0 4px 15px var(--shadow-light); }
        body.dark footer { background: var(--card-dark); color: var(--text-dark); box-shadow: 0 4px 15px var(--shadow-dark); }
        footer a { color: #fff; font-weight: 600; text-decoration: none; transition: opacity 0.2s; margin: 0 10px;  }
        body.dark footer a { color: var(--primary); }
        footer a:hover { opacity: 0.8; text-decoration: underline; }
        footer p { margin-bottom: 10px; } 

        /* --- Sidenav --- */
        .sidenav { height: 100%; width: 0; position: fixed; z-index: 1002; top: 0; left: 0; overflow-x: hidden; transition: 0.5s; padding-top: 60px; background-color: rgba(255, 255, 255, 0.98); backdrop-filter: blur(8px); }
        body.dark .sidenav { background-color: rgba(30, 30, 30, 0.98); }
        .sidenav a { padding: 12px 15px 12px 32px; text-decoration: none; font-size: 20px; font-weight: 600; color: var(--text-light); display: block; transition: 0.3s; }
        body.dark .sidenav a { color: var(--text-dark); }
        .sidenav a:hover { color: var(--primary); background-color: var(--primary-light-transparent); }
        .sidenav .closebtn { position: absolute; top: 15px; right: 25px; font-size: 36px; }

        /* --- UI for Main Content --- */
        .page-hero { background: linear-gradient(45deg, #8c53ff, #ab68ff); color: white; text-align: center; padding: 50px 20px; margin-bottom: 50px; }
        .page-hero h2 { font-size: 48px; font-weight: 700; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .page-hero p { font-size: 18px; max-width: 750px; margin: 0 auto; opacity: 0.9; }
        .main-content { width: 95%; max-width: 1200px; margin: 0 auto 50px auto; }
        .contact-container { display: grid; grid-template-columns: 1.2fr 1fr; gap: 40px; align-items: flex-start; }
        .contact-form-column { background: var(--card-light); padding: 40px; border-radius: var(--radius); box-shadow: 0 10px 30px var(--shadow-light); border: 1px solid #eee; }
        body.dark .contact-form-column { background: var(--card-dark); box-shadow: 0 10px 30px var(--shadow-dark); border-color: #444; }
        .form-group { position: relative; margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 15px; }
        .form-group .fa-solid, .form-group .fa-brands { position: absolute; left: 18px; top: 50%; transform: translateY(25%); color: #aaa; transition: color 0.3s; }
        #contactForm input, #contactForm textarea, #contactForm select { width: 100%; padding: 14px 18px 14px 50px; border: 1px solid #ddd; border-radius: var(--radius); background-color: #f7f7f7; color: var(--text-light); font-family: 'Poppins', sans-serif; font-size: 16px; transition: all 0.3s ease; }
        body.dark #contactForm input, body.dark #contactForm textarea, body.dark #contactForm select { background-color: #3a3f44; border-color: #555; color: var(--text-dark); }
        #contactForm input:focus, #contactForm textarea:focus, #contactForm select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-light-transparent); }
        #contactForm input:focus ~ i, #contactForm textarea:focus ~ i, #contactForm select:focus ~ i { color: var(--primary); }
        #contactForm textarea { resize: vertical; min-height: 140px; padding-top: 14px; }
        #contactForm input.is-valid, #contactForm select.is-valid, #contactForm textarea.is-valid { border-color: var(--success); }
        #contactForm input.is-invalid, #contactForm select.is-invalid, #contactForm textarea.is-invalid { border-color: var(--danger); }
        #contact-submit-btn { width: 100%; padding: 16px; border: none; border-radius: var(--radius); background: var(--primary); color: white; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.3s ease; }
        #contact-submit-btn:hover:not(:disabled) { background: var(--primary-dark); transform: translateY(-3px); }
        #contact-submit-btn:disabled { background: #ccc; cursor: not-allowed; }
        body.dark #contact-submit-btn:disabled { background: #555; }
        #form-status-message { margin-top: 20px; padding: 15px; border-radius: var(--radius); text-align: center; font-weight: 500; }
        #form-status-message.success { background-color: var(--success-bg); color: var(--success); border: 1px solid var(--success); }
        #form-status-message.error { background-color: var(--danger-bg); color: var(--danger); border: 1px solid var(--danger); }
        .contact-info-column { display: flex; flex-direction: column; gap: 30px; }
        .info-card { background: var(--card-light); padding: 30px; border-radius: var(--radius); box-shadow: 0 10px 30px var(--shadow-light); border: 1px solid #eee; }
        body.dark .info-card { background: var(--card-dark); box-shadow: 0 10px 30px var(--shadow-dark); border-color: #444; }
        .info-card h3 { color: var(--primary); margin-top: 0; margin-bottom: 25px; display: flex; align-items: center; gap: 12px; font-size: 22px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        body.dark .info-card h3 { border-bottom-color: #444; }
        .contact-details-list { list-style: none; padding: 0; margin: 0; }
        .contact-details-list li { display: flex; align-items: flex-start; margin-bottom: 20px; font-size: 16px; }
        .contact-details-list li i { font-size: 20px; width: 22px; text-align: center; margin-right: 18px; color: var(--primary); margin-top: 3px; }
        .contact-details-list a { color: var(--text-light); text-decoration: none; transition: color 0.2s ease; font-weight: 500; }
        body.dark .contact-details-list a { color: var(--text-dark); }
        .contact-details-list a:hover { color: var(--primary); text-decoration: underline; }
        .contact-details-list span { line-height: 1.5; word-break: break-all; }
        .office-hours-list li { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        body.dark .office-hours-list li { border-bottom-color: #444; }
        .office-hours-list li:last-child { border-bottom: none; }
        .office-hours-list .day { font-weight: 600; }
        .google-maps { margin-top: 50px; }
        .google-maps h2 { text-align: center; color: var(--primary); margin-bottom: 25px; font-size: 28px; }
        .google-maps iframe { width: 100%; height: 450px; border: 0; border-radius: var(--radius); box-shadow: 0 10px 30px var(--shadow-light); }
        body.dark .google-maps iframe { box-shadow: 0 10px 30px var(--shadow-dark); }
        
        /* ****** GO TO TOP BUTTON RESTORED TO ORIGINAL ****** */
        #goToTopBtn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background-color: var(--primary); color: white; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; display: none; z-index: 1000; box-shadow: 0 4px 12px var(--shadow-light); transition: all 0.3s ease-in-out; display: flex; align-items: center; justify-content: center; } 
        #goToTopBtn:hover { background-color: var(--primary-dark); transform: scale(1.1); } 
        body.dark #goToTopBtn { box-shadow: 0 4px 12px var(--shadow-dark); } 

        .hidden { display: none !important; }
        .fade-in-up { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in-up.visible { opacity: 1; transform: translateY(0); }

        /* Profile Dropdown Styles */
        .profile-container { position: relative; z-index: 999; }
        #profile-icon { width: 42px; height: 42px; border-radius: 50%; cursor: pointer; border: 2px solid #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.2); transition: transform 0.2s ease-in-out; object-fit: cover; }
        #profile-icon:hover, #profile-icon:focus { transform: scale(1.1); }
        .profile-dropdown { position: absolute; top: 55px; right: 0; width: 260px; background: var(--card-light); border-radius: var(--radius); box-shadow: 0 8px 25px var(--shadow-light); border: 1px solid #eee; overflow: hidden; animation: fadeIn 0.3s ease; transition: opacity 0.3s ease, transform 0.3s ease; }
        body.dark .profile-dropdown { background: var(--card-dark); box-shadow: 0 8px 25px var(--shadow-dark); border-color: #444; }

        @media (max-width: 992px) {
            #live-clock, #live-weather { display: none; }
            .contact-container { grid-template-columns: 1fr; }
            .page-hero h2 { font-size: 38px; }
        }
        @media (max-width: 768px) { 
            .page-hero { padding: 40px 15px; } .page-hero h2 { font-size: 32px; }
            .page-hero p { font-size: 16px; } .contact-form-column { padding: 25px; }
            .google-maps iframe { height: 350px; }
        }
    </style>
</head>
<body>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
  <a href="index.html" onclick="closeNav()">Home</a>
  <a href="about.html" onclick="closeNavAndGoTo('about.html')">About</a>
  <a href="blogs.html" onclick="closeNavAndGoTo('blogs.html')">Blog</a>
  <a href="privacy-policy.html" onclick="closeNavAndGoTo('privacy-policy.html')">Privacy Policy</a>
  <a href="terms-of-service.html" onclick="closeNavAndGoTo('terms-of-service.html')">Terms of Service</a>
  <a href="disclaimer.html" onclick="closeNavAndGoTo('disclaimer.html')">Disclaimer</a>
  <a href="404.html" onclick="closeNavAndGoTo('404.html')">404 Page</a>
  <a href="contact.html" onclick="closeNavAndGoTo('contact.html')">Contact</a>
</div>

<header>
    <div class="header-left">
        <span class="open-nav-btn" onclick="openNav()">☰</span>
        <span id="live-clock"></span>
    </div>
    <div class="header-content">
        <h1><a href="index.html" style="text-decoration: none; color: inherit;">📝 NOTE_<span style="color:#ffc107">P@D</span></a></h1>
        <p style="margin-top: 5px; font-weight: 300; opacity: 0.9;">Notepad, Whiteboard, and To-Do List</p>
    </div>
    <div class="header-right">
        <span id="live-weather"><i class="fas fa-spinner fa-spin"></i> Loading...</span>
        <div id="profile-container" class="profile-container hidden">
            <!-- Profile dropdown HTML will be dynamically managed by JS -->
        </div>
    </div>
</header>
<input type="file" id="photoUpload" class="hidden" accept="image/*">

<main>
    <div class="page-hero">
        <h2>Contact Us</h2>
        <p>We're here to help and answer any question you might have. We look forward to hearing from you.</p>
    </div>

    <div class="main-content">
        <div class="contact-container">
            <!-- Left Column: Form -->
            <div class="contact-form-column fade-in-up">
                <form id="contactForm" novalidate>
                    <div class="form-group"><label for="contact-name">Full Name</label><input type="text" id="contact-name" name="name" placeholder="John Doe" required><i class="fa-solid fa-user"></i></div>
                    <div class="form-group"><label for="contact-email">Email Address</label><input type="email" id="contact-email" name="email" placeholder="you@example.com" required><i class="fa-solid fa-envelope"></i></div>
                    <div class="form-group"><label for="contact-inquiry">Reason for Contact</label><select id="contact-inquiry" name="inquiry" required><option value="" disabled selected>Please select a reason...</option><option value="general">General Question</option><option value="support">Technical Support</option><option value="feedback">Feedback & Suggestions</option><option value="partnership">Partnership Inquiry</option><option value="other">Other</option></select><i class="fa-solid fa-clipboard-question"></i></div>
                    <div class="form-group"><label for="contact-message">Message</label><textarea id="contact-message" name="message" rows="6" placeholder="Your detailed message here..." required></textarea><i class="fa-solid fa-pen-to-square"></i></div>
                    <div id="form-status-message" style="display: none;"></div>
                    <button type="submit" id="contact-submit-btn">Send Message</button>
                </form>
            </div>

            <!-- Right Column: Info -->
            <div class="contact-info-column">
                <div class="info-card fade-in-up" style="animation-delay: 0.1s;">
                    <h3><i class="fa-solid fa-address-book"></i> Direct Contact</h3>
                    <ul class="contact-details-list">
                        <li><i class="fa-solid fa-phone-volume"></i><span>+977 9827801575<br>+977 9828138995</span></li>
                        <li><i class="fa-brands fa-whatsapp"></i><a href="https://wa.me/9779827801575" target="_blank" rel="noopener noreferrer">WhatsApp (+977 9827801575)</a></li>
                        <li><i class="fa-solid fa-envelope"></i><a href="mailto:bishalmishra9000@gmail.com">bishalmishra9000@gmail.com</a></li>
                        <li><i class="fa-brands fa-facebook"></i><a href="https://www.facebook.com/share/19LTBhKXuy/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Follow on Facebook</a></li>
                        <li><i class="fa-solid fa-globe"></i><a href="https://bishalmishra.com" target="_blank" rel="noopener noreferrer">www.bishalmishra.com</a></li>
                    </ul>
                </div>
                <div class="info-card fade-in-up" style="animation-delay: 0.2s;">
                    <h3><i class="fa-solid fa-clock"></i> Office Hours</h3>
                    <ul class="office-hours-list"><li><span class="day">Sunday - Friday</span><span>10:00 AM - 5:00 PM (NPT)</span></li><li><span class="day">Saturday</span><span>Closed</span></li></ul>
                </div>
            </div>
        </div>
        
        <div class="google-maps fade-in-up">
            <h2><i class="fa-solid fa-map-location-dot"></i> Our Location</h2>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14131.066497334707!2d85.25997258931113!3d27.69176318465135!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39eb18129031d2e1%3A0xc3c51ed1c37b75f!2sKirtipur%20Kathmandu%2044618!5e0!3m2!1sen!2snp!4v1717398123456!5m2!1sen!2snp" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Google Maps Location of Kirtipur, Kathmandu, Nepal"></iframe>
        </div>
    </div>
</main>

<button id="goToTopBtn" title="Go to top" aria-label="Go to top">↑</button>

<footer>
   <p>Copyright © <span id="currentYear"></span> <a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Bishal Mishra</a> | All Rights Reserved.</p>
   <div>
        <a href="privacy-policy.html">Privacy Policy</a> |
        <a href="terms-of-service.html">Terms of Service</a> |
        <a href="disclaimer.html">Disclaimer</a> |
        <a href="contact.html">Contact Us</a>
   </div>
</footer>


<script>
// --- CORE PAGE LOGIC ---
document.addEventListener("DOMContentLoaded", () => {
    loadDarkMode(); 
    updateClock(); 
    setInterval(updateClock, 1000); 
    fetchWeather(); // <-- FIXED: This is now enabled
    checkAuthStatus(); // <-- FIXED: This is now enabled
    attachEventListeners(); 
    setupIntersectionObserver();
    document.getElementById('currentYear').textContent = new Date().getFullYear();
});

// --- SIDENAV ---
function openNav() { document.getElementById("mySidenav").style.width = "280px"; }
function closeNav() { document.getElementById("mySidenav").style.width = "0"; }
function closeNavAndGoTo(url) { closeNav(); setTimeout(() => window.location.href = url, 300); }

// --- ANIMATION OBSERVER ---
function setupIntersectionObserver() {
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
    }, { threshold: 0.1 });
    document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
}

// --- CONTACT FORM LOGIC ---
const contactForm = document.getElementById('contactForm');
const fields = ['name', 'email', 'inquiry', 'message'];
function validateField(field) {
    const input = contactForm.elements[field];
    input.classList.remove('is-valid', 'is-invalid');
    let isValid = (field === 'email') ? (input.value.trim() !== '' && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(input.value)) : (input.value.trim() !== '');
    input.classList.add(isValid ? 'is-valid' : 'is-invalid');
    return isValid;
}
function validateAllFields() { return fields.map(validateField).every(isValid => isValid); }
function handleContactFormSubmit(event) {
    event.preventDefault();
    const submitBtn = document.getElementById('contact-submit-btn');
    const statusMsg = document.getElementById('form-status-message');
    if (!validateAllFields()) {
        statusMsg.textContent = 'Please correct the errors before submitting.';
        statusMsg.className = 'error'; statusMsg.style.display = 'block'; return;
    }
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    statusMsg.style.display = 'none';
    setTimeout(() => {
        statusMsg.innerHTML = '<i class="fas fa-check-circle"></i> Thank you! Your message has been sent successfully.';
        statusMsg.className = 'success'; statusMsg.style.display = 'block';
        contactForm.reset();
        fields.forEach(field => contactForm.elements[field].classList.remove('is-valid', 'is-invalid'));
        submitBtn.disabled = false;
        submitBtn.textContent = 'Send Message';
        setTimeout(() => { statusMsg.style.display = 'none'; }, 6000);
    }, 2000);
}

// --- ALL EVENT LISTENERS ---
function attachEventListeners() {
    if (contactForm) {
        contactForm.addEventListener('submit', handleContactFormSubmit);
        fields.forEach(field => { const el = contactForm.elements[field]; if(el) el.addEventListener('blur', () => validateField(field)); });
    }
    const goToTopBtn = document.getElementById('goToTopBtn');
    window.onscroll = () => { if (goToTopBtn) { goToTopBtn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "flex" : "none"; } };
    if (goToTopBtn) { goToTopBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' }); }
    document.body.addEventListener('click', (event) => { if (event.target && event.target.id === 'weather-refresh-btn') { const icon = event.target; icon.classList.add('fa-spin'); fetchWeather(); } });
}

// --- UTILITY FUNCTIONS (DARK MODE, CLOCK) ---
function loadDarkMode() { if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark'); }
function updateClock() { const el=document.getElementById('live-clock'); if(!el)return;const t=new Date;let e=t.getHours();const o=t.getMinutes().toString().padStart(2,'0'),n=t.getSeconds().toString().padStart(2,'0'),s=e>=12?"PM":"AM";e=e%12,e=e||12,el.textContent=`${e}:${o}:${n} ${s}` }

// ****** WEATHER FUNCTIONS RESTORED ******
function getWeatherIconClass(id) { if (id >= 200 && id < 300) return 'fas fa-bolt'; if (id >= 300 && id < 400) return 'fas fa-cloud-rain'; if (id >= 500 && id < 600) return 'fas fa-cloud-showers-heavy'; if (id >= 600 && id < 700) return 'fas fa-snowflake'; if (id >= 700 && id < 800) return 'fas fa-smog'; if (id === 800) return 'fas fa-sun'; if (id === 801) return 'fas fa-cloud-sun'; if (id > 801 && id < 805) return 'fas fa-cloud'; return 'fas fa-question-circle'; }
function fetchWeatherData(lat, lon) { const weatherElement = document.getElementById('live-weather'); const apiKey = '6c6f3b5d9306e38909bea9a6b45a3e74'; const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`; fetch(apiUrl).then(res => { if (!res.ok) throw new Error(`API Error: ${res.statusText}`); return res.json(); }).then(data => { if (!data.main || !data.weather || !data.weather[0] || !data.name) throw new Error('Invalid data from API'); const temp = Math.round(data.main.temp); const icon = getWeatherIconClass(data.weather[0].id); weatherElement.innerHTML = `<i class="${icon}"></i> ${data.name}: ${temp}°C <i id="weather-refresh-btn" class="fas fa-sync-alt" title="Refresh weather"></i>`; }).catch(err => { console.error('Error fetching weather:', err); weatherElement.innerHTML = `<i class="fas fa-times-circle"></i> Weather unavailable <i id="weather-refresh-btn" class="fas fa-sync-alt" title="Retry"></i>`; }); }
function fetchWeather() { const el = document.getElementById('live-weather'); if (!el) return; if (!el.innerHTML.includes('fa-spin')) el.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Fetching...`; if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(pos => fetchWeatherData(pos.coords.latitude, pos.coords.longitude), () => fetchWeatherData(27.7172, 85.3240), { timeout: 10000 }); } else { fetchWeatherData(27.7172, 85.3240); } }

// ****** AUTH & PROFILE FUNCTIONS RESTORED ******
function checkAuthStatus() { const userId = localStorage.getItem('currentUserId'); if (userId) { showUserInfo(); } else { const pc = document.getElementById('profile-container'); if(pc) pc.classList.add('hidden'); } }
function showUserInfo() {
    const username = localStorage.getItem('currentUser');
    const profileContainer = document.getElementById('profile-container');
    if (!username || !profileContainer) return;

    profileContainer.classList.remove('hidden');
    // For simplicity, I am keeping the profile dropdown structure minimal here.
    // If you need the full dropdown functionality, that code can be re-added.
    profileContainer.innerHTML = `<img id="profile-icon" src="${localStorage.getItem('userPic') || `https://ui-avatars.com/api/?name=${encodeURIComponent(username.substring(0,2))}`}" alt="Profile" />`;
}
</script>
</body>
</html>
