<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <title>About - Note Pad - Modern Online Notepad, Whiteboard & To-Do List</title>
    
    <meta name="description" content="Learn about Bishal Mishra, the developer behind Note Pad, a free, fast, and secure online application featuring a modern notepad, a digital whiteboard for drawing, and a to-do list manager."/>
    
    <meta name="keywords" content="about us, bishal mishra, developer, online notepad, productivity app, Note Pad, web development"/>
    
    <meta name="author" content="Bishal Mishra">
    <meta name="robots" content="index, follow">

    <link rel="canonical" href="https://bishalmishra.com/about.html">

    <meta property="og:title" content="About - Note Pad - Modern Online Notepad, Whiteboard & To-Do List" />
    <meta property="og:description" content="Learn about Bishal Mishra, the developer behind Note Pad, a free, secure online tool with a notepad, whiteboard, and to-do list." />
    <meta property="og:image" content="https://i.imgur.com/kR1k1jU.png" />
    <meta property="og:url" content="https://bishalmishra.com/about.html" />
    <meta property="og:type" content="website" />
    
    <meta name="msvalidate.01" content="F28FD042305E7D060B4355FA59E662D8" />
    <link rel="manifest" href="manifest.json">
        
    <meta name="yandex-verification" content="af349c5874d738ed" />
   
    <link rel="icon" type="image/png" href="images/favicon.png"> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- AdSense SCRIPT (typically in HEAD) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3010913100191778"
         crossorigin="anonymous"></script>
    <!-- End AdSense SCRIPT -->
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-light: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            --text-light: #333;
            --card-light: #ffffff;
            --shadow-light: rgba(0, 0, 0, 0.08);

            --bg-dark: linear-gradient(120deg, #2b2b2b 0%, #1e1e1e 100%);
            --text-dark: #e0e0e0;
            --card-dark: #2c2c2c;
            --shadow-dark: rgba(0, 0, 0, 0.25);
           
            --primary: #8c53ff;
            --primary-dark: #7042cc;
            --primary-light-transparent: rgba(140, 83, 255, 0.1);
            --radius: 12px;
        }

        html { height: 100%; scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg-light); color: var(--text-light); line-height: 1.6; transition: background 0.5s ease, color 0.5s ease; display: flex; flex-direction: column; min-height: 100vh; }
        body.dark { background: var(--bg-dark); color: var(--text-dark); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        main.container { width: 95%; max-width: 1200px; margin: 20px auto; flex-grow: 1; padding-bottom: 40px; transition: max-width 0.3s ease; } 
        header, footer { background: var(--primary); color: white; padding: 15px 5%; text-align: center; box-shadow: 0 4px 15px var(--shadow-light); z-index: 10; }
        header {
            display: flex;
            justify-content: flex-start; /* Default for mobile */
            align-items: center;
            position: relative;
        }
        .header-content {
            text-align: center;
            flex-grow: 1; /* Allows it to take center space */
        }
        body.dark header, body.dark footer { box-shadow: 0 4px 15px var(--shadow-dark); }
        footer { margin-top: auto; padding: 20px;  }
        footer a { color: #fff; font-weight: 600; text-decoration: none; transition: opacity 0.2s; margin: 0 10px;  }
        footer a:hover { opacity: 0.8; text-decoration: underline; }
        footer p { margin-bottom: 10px; } 
        
        .sidenav {
            height: 100%;
            width: 0; 
            position: fixed;
            z-index: 1002; 
            top: 0;
            left: 0;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
        }

        body.dark .sidenav {
            background-color: rgba(30, 30, 30, 0.95);
        }

        .sidenav a {
            padding: 10px 15px 10px 32px;
            text-decoration: none;
            font-size: 20px; 
            font-weight: 600;
            color: var(--text-light);
            display: block;
            transition: 0.3s;
        }
        body.dark .sidenav a {
            color: var(--text-dark);
        }

        .sidenav a:hover {
            color: var(--primary);
        }

        .sidenav .closebtn {
            position: absolute;
            top: 10px;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
        }

        .open-nav-btn {
            font-size: 28px;
            cursor: pointer;
            color: white;
            transition: transform 0.2s;
            position: absolute;
            left: 5%;
            top: 50%;
            transform: translateY(-50%);
        }
        .open-nav-btn:hover {
            transform: translateY(-50%) scale(1.1);
        }

        #menu-bar { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; background: var(--card-light); padding: 15px; border-radius: var(--radius); margin: 20px 0; box-shadow: 0 4px 15px var(--shadow-light); }
        #menu-bar button, #menu-bar select { padding: 8px 15px; border-radius: var(--radius); border: none; cursor: pointer; background-color: #f0f0f0; color: #333; font-weight: 600; transition: all 0.2s ease-in-out; }
        #menu-bar button:hover, #menu-bar select:hover { background-color: #e0e0e0; transform: translateY(-2px); }
        body.dark #menu-bar { background: #252525; box-shadow: 0 4px 15px var(--shadow-dark); }
        body.dark #menu-bar button, body.dark #menu-bar select { background-color: var(--card-dark); color: var(--text-dark); }
        
        .mode-switcher { border-left: 2px solid #ddd; padding-left: 10px; margin-left: 10px; display:flex; gap: 10px; flex-wrap: wrap; }
        body.dark .mode-switcher { border-left-color: #555; }
        .mode-switcher button.active-mode { background-color: var(--primary); color: white; }
        body.dark .mode-switcher button.active-mode { background-color: var(--primary-dark); }
        
        #editor, #notes, .info-section, #whiteboard-container, #calendar-container, #faq-section, #blogs-section, #privacy-policy-section, #terms-of-service-section, #disclaimer-section
        { 
            background: var(--card-light); 
            padding: 25px; 
            border-radius: var(--radius); 
            box-shadow: 0 4px 15px var(--shadow-light); 
            margin-bottom: 25px; 
            text-align: left; 
        }
        body.dark #editor, body.dark #notes, body.dark .info-section, body.dark #whiteboard-container, body.dark #calendar-container, body.dark #faq-section, body.dark #blogs-section, body.dark #privacy-policy-section, body.dark #terms-of-service-section, body.dark #disclaimer-section { 
            background: var(--card-dark); 
            box-shadow: 0 4px 15px var(--shadow-dark); 
        }
       
        #editor textarea, #editor input[type="text"] { width: 100%; font-size: 16px; padding: 12px; border-radius: var(--radius); border: 1px solid #e0e0e0; background: var(--bg-light); color: var(--text-light); resize: vertical; transition: border-color 0.3s ease, box-shadow 0.3s ease, background 0.3s ease, color 0.3s ease; }
        #editor textarea:focus, #editor input[type="text"]:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(140, 83, 255, 0.2); }
        #editor input[type="text"] { margin-bottom: 15px; font-size: 20px; font-weight: 600; }
        body.dark #editor textarea, body.dark #editor input[type="text"] { border-color: #444; background: #333; color: var(--text-dark); }
        
        #editor-stats { display: flex; gap: 20px; margin-top: 10px; font-size: 14px; color: #888; }
        body.dark #editor-stats { color: #aaa; }

        #whiteboard-canvas { border: 2px solid #eee; border-radius: var(--radius); cursor: crosshair; touch-action: none; background-color: #fff;  }
        body.dark #whiteboard-canvas { border-color: #444; background-color: #383838; }
        #whiteboard-toolbar { display: flex; flex-wrap: wrap; align-items: center; gap: 15px; margin-top: 15px; }
        #whiteboard-toolbar label { font-weight: 600; }
        #whiteboard-toolbar input[type="color"] { width: 40px; height: 40px; border: none; padding: 0; cursor: pointer; background: none; border-radius: 50%; }
        #whiteboard-toolbar input[type="range"] { cursor: pointer; }
        #whiteboard-toolbar button { padding: 8px 15px; border-radius: 8px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0; font-weight: 500; transition: all 0.2s ease-in-out; }
        #whiteboard-toolbar button.active { background: var(--primary); color: white; border-color: var(--primary); }
        
        #todo-list-container { min-height: 200px; padding: 10px; border-radius: var(--radius); border: 1px solid #e0e0e0; }
        body.dark #todo-list-container { border-color: #444; }
        .todo-item { display: flex; align-items: center; gap: 12px; font-size: 16px; padding: 8px 4px; border-bottom: 1px solid #f0f0f0; }
        body.dark .todo-item { border-bottom-color: #3a3a3a; }
        .todo-item:last-child { border-bottom: none; }
        .todo-item input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--primary); }
        .todo-item .todo-text { flex-grow: 1; outline: none; }
        .todo-item.completed .todo-text { text-decoration: line-through; color: #999; }
        #add-todo-btn { margin-top: 15px; }

        .note { border-radius: var(--radius); padding: 20px; margin-bottom: 15px; border: 1px solid #e7e7e7; transition: box-shadow 0.3s ease, transform 0.3s ease, border-left 0.3s ease; }
        .note:hover { transform: translateY(-3px); box-shadow: 0 6px 20px var(--shadow-light); }
        body.dark .note { border-color: #444; }
        body.dark .note:hover { box-shadow: 0 6px 20px var(--shadow-dark); }
        .note.pinned { border-left: 5px solid gold; }
        .note h4 { margin-bottom: 5px; font-size: 18px; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .note p { margin: 10px 0; word-break: break-word; }
        .note small { color: #888; }
        body.dark .note small { color: #aaa; }
        .note-actions button { margin-right: 8px; margin-top: 10px; padding: 6px 12px; border-radius: 8px; border: 1px solid #ccc; cursor: pointer; background: #f0f0f0; font-weight: 500; transition: all 0.2s ease-in-out; }
        body.dark .note-actions button { background: #3e3e3e; color: var(--text-dark); border-color: #555; }

        h2, h3 { font-size: 24px; margin-bottom: 20px; color: var(--primary); text-align: center; }
        .info-section h3, #blogs-section h3, #faq-section h3, #privacy-policy-section h3, #terms-of-service-section h3, #disclaimer-section h3 { text-align: left;  }
        .info-section p, .info-section ul, #privacy-policy-section p, #privacy-policy-section ul, #terms-of-service-section p, #terms-of-service-section ul, #disclaimer-section p, #disclaimer-section ul  { margin-bottom: 15px; }
        .info-section ul { list-style: none; padding-left: 0; }
        .info-section ul li { padding-left: 30px; position: relative; margin-bottom: 12px; }
        .info-section ul li::before { content: '\f058'; font-family: 'Font Awesome 6 Free'; font-weight: 900; color: var(--primary); position: absolute; left: 0; top: 2px; font-size: 18px; }
        #privacy-policy-section h4, #terms-of-service-section h4, #disclaimer-section h4 { font-size: 1.2em; color: var(--primary-dark); margin-top: 20px; margin-bottom: 10px; }

        /* Blog Styling */
        main.container.full-width-mode {
            max-width: 100%;
            padding: 20px 3%; /* More padding on the sides */
        }
        .full-width-mode .blog-post {
            max-width: 900px; /* Keep content readable */
            margin-left: auto;
            margin-right: auto;
        }

        .blog-post {
            background: var(--card-light);
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: 0 4px 15px var(--shadow-light);
            margin-bottom: 25px;
            text-align: left; 
        }
        body.dark .blog-post {
            background: var(--card-dark);
            box-shadow: 0 4px 15px var(--shadow-dark);
        }
        .blog-post h4 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 22px;
            font-weight: 700;
        }
        .blog-post-meta {
            font-size: 13px;
            color: #888;
            margin-bottom: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }
        body.dark .blog-post-meta {
            color: #aaa;
        }
        .blog-post-meta i {
            margin-right: 5px;
            color: var(--primary); 
        }
        .blog-post-content {
            font-size: 16px; /* Slightly larger font */
            line-height: 1.8; /* Increased line height */
            color: var(--text-light); 
        }
        body.dark .blog-post-content {
            color: var(--text-dark);
        }
        .blog-post-content p {
            margin-bottom: 15px;
        }
        .blog-post-content ul {
            list-style: disc;
            padding-left: 20px;
            margin-bottom: 15px;
        }
        .blog-post-content ul li {
            margin-bottom: 5px;
        }
        .blog-post-content a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s ease;
        }
        .blog-post-content a:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }
        .blog-post-image {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius);
            margin-bottom: 15px;
            display: block; 
        }
        .blog-content-short {
            display: -webkit-box;
            -webkit-line-clamp: 3; 
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: calc(1.7em * 3); 
            margin-bottom: 15px; 
        }
        .blog-content-full {
            display: block; 
            max-height: none; 
            margin-bottom: 15px;
        }
        .read-more-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s ease-in-out;
            display: inline-block; 
            margin-top: 10px; 
        }
        .read-more-btn:hover {
            background: var(--primary-dark);
        }

        .blog-post-content .see-result-btn {
            display: block;
            width: fit-content;
            margin: 15px auto;
            background-color: #28a745;
            color: white;
            padding: 12px 25px;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .blog-post-content .see-result-btn:hover {
            background-color: #218838;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .blog-post-footer-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }
        body.dark .blog-post-footer-section { border-top-color: #3a3a3a; }
        .blog-post-footer-section > div {
            padding: 15px;
            background: var(--bg-light);
            border-radius: var(--radius);
            box-shadow: 0 2px 10px var(--shadow-light);
            color: var(--text-light);
        }
        body.dark .blog-post-footer-section > div { background: #333; box-shadow: 0 2px 10px var(--shadow-dark); color: var(--text-dark); }
        .blog-post-footer-section h5 { color: var(--primary); margin-bottom: 15px; font-size: 1.1em; font-weight: 700; }
        .tags-list a { display: inline-block; background-color: #e0e0e0; color: #555; padding: 6px 12px; border-radius: 6px; text-decoration: none; margin: 5px; font-size: 14px; transition: background-color 0.2s ease, color 0.2s ease; }
        body.dark .tags-list a { background-color: #4a4a4a; color: #ccc; }
        .tags-list a:hover { background-color: var(--primary); color: white; }
        .blog-share button { background: #4267B2; color: white; border: none; padding: 8px 15px; border-radius: var(--radius); cursor: pointer; font-size: 15px; margin-right: 10px; transition: background 0.2s ease; }
        .blog-share button:nth-of-type(2) { background: #25D366; }
        .blog-share button:hover { opacity: 0.9; }
        .blog-share button i { margin-right: 8px; }
        .blog-search input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: var(--radius); font-size: 15px; background: var(--card-light); color: var(--text-light); transition: border-color 0.3s ease; }
        body.dark .blog-search input[type="text"] { background: #2b2b2b; border-color: #555; color: var(--text-dark); }
        .blog-search input[type="text"]:focus { outline: none; border-color: var(--primary); }
        .blog-recent-posts ul { list-style: none; padding: 0; }
        .blog-recent-posts li { margin-bottom: 10px; }
        .blog-recent-posts li a { color: var(--text-light); text-decoration: none; transition: color 0.2s ease; font-size: 15px; }
        body.dark .blog-recent-posts li a { color: var(--text-dark); }
        .blog-recent-posts li a:hover { color: var(--primary); text-decoration: underline; }
        .blog-newsletter input[type="email"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: var(--radius); font-size: 15px; margin-bottom: 10px; background: var(--card-light); color: var(--text-light); transition: border-color 0.3s ease; }
        body.dark .blog-newsletter input[type="email"] { background: #2b2b2b; border-color: #555; color: var(--text-dark); }
        .blog-newsletter input[type="email"]:focus { outline: none; border-color: var(--primary); }
        .blog-newsletter button { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: var(--radius); cursor: pointer; font-size: 16px; width: 100%; transition: background 0.2s ease; }
        .blog-newsletter button:hover { background: var(--primary-dark); }


        .premium-offerings { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px; }
        .premium-feature-card { background: var(--card-light); padding: 25px; border-radius: var(--radius); box-shadow: 0 4px 15px var(--shadow-light); text-align: center; flex: 1 1 280px; max-width: 300px; }
        body.dark .premium-feature-card { background: var(--card-dark); box-shadow: 0 4px 15px var(--shadow-dark); }
        .premium-feature-card h4 { color: var(--primary); margin-bottom: 10px; }
        .premium-feature-card .price { font-weight: bold; color: var(--primary); margin-top: 15px; font-size: 1.1em; }
        .premium-buy-btn { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: var(--radius); cursor: pointer; font-size: 16px; transition: background 0.2s ease; margin-top: 15px; }
        .premium-buy-btn:hover { background: var(--primary-dark); }
        .manual-payment-info { margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee; display: none; flex-direction: column; align-items: center; font-size: 14px; color: var(--text-light); }
        body.dark .manual-payment-info { border-top-color: #444; color: var(--text-dark); }
        .manual-payment-info p { margin-bottom: 5px; }
        .manual-payment-info small { margin-top: 10px; color: #888; text-align: center; }
        body.dark .manual-payment-info small { color: #aaa; }
        .manual-payment-info img { box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 150px; height: 150px; border-radius: var(--radius); margin-bottom: 10px; }

        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .profile-container {
            position: relative;
            z-index: 999;
            margin-left: auto; /* Push to the right in flex container */
        }
        #profile-icon {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s ease-in-out;
            object-fit: cover;
        }
        #profile-icon:hover, #profile-icon:focus { transform: scale(1.1); }
        .profile-dropdown {
            position: absolute;
            top: 55px; 
            right: 0; 
            width: 260px;
            background: var(--card-light);
            border-radius: var(--radius);
            box-shadow: 0 8px 25px var(--shadow-light);
            border: 1px solid #eee;
            overflow: hidden;
            animation: fadeIn 0.3s ease;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        body.dark .profile-dropdown { background: var(--card-dark); box-shadow: 0 8px 25px var(--shadow-dark); border-color: #444; }
        .dropdown-header { display: flex; align-items: center; gap: 15px; padding: 15px; border-bottom: 1px solid #f0f0f0; }
        body.dark .dropdown-header { border-bottom-color: #444; }
        .dropdown-header img { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; }
        .dropdown-header span { font-weight: 600; font-size: 16px; word-break: break-all; }
        body.dark .dropdown-header small { color: #bbb !important; }
        .dropdown-menu { list-style: none; padding: 10px 0; margin: 0; }
        .dropdown-menu li a { display: flex; align-items: center; gap: 12px; padding: 12px 20px; text-decoration: none; color: var(--text-light); font-size: 14px; transition: background-color 0.2s ease; }
        body.dark .dropdown-menu li a { color: var(--text-dark); }
        .dropdown-menu li a:hover { background-color: #f5f5f5; }
        body.dark .dropdown-menu li a:hover { background-color: #3e3e3e; }
        .dropdown-menu li.divider { height: 1px; margin: 8px 0; background: #e0e0e0; }
        body.dark .dropdown-menu li.divider { background: #444; }
        #emailVerifiedStatus .fa-check-circle { color: #28a745; } 
        #emailVerifiedStatus .fa-times-circle { color: #dc3545; } 
        
        .about-dev { display: flex; align-items: center; gap: 25px; margin-top: 15px;  } 
        .about-dev img { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid var(--primary); box-shadow: 0 4px 15px var(--shadow-light); } 
        body.dark .about-dev img { box-shadow: 0 4px 15px var(--shadow-dark); } 
        .about-dev-text { flex: 1; } 
        .about-dev a { color: var(--primary); font-weight: 600; text-decoration: none; } 
        .about-dev a:hover { text-decoration: underline; } 
        
        .modal, .welcome-popup { position: fixed; inset: 0; display: flex; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(8px); z-index: 1001; } 
        .modal-content, .welcome-content { font-family: 'Inter', sans-serif; background: var(--card-light); color: var(--text-light); padding: 32px; border-radius: var(--radius); text-align: center; max-width: 380px; width: 90%; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); animation: fadeIn 0.5s ease; border: 1px solid rgba(255, 255, 255, 0.1); } 
        body.dark .modal-content, body.dark .welcome-content { background: var(--card-dark); color: var(--text-dark); } 
        .modal-content h2, .welcome-content h2 { margin-bottom: 20px; } 
        .modal-content input { width: 100%; padding: 12px 14px; margin: 8px 0; border: 1px solid #d1d5db; border-radius: var(--radius); font-size: 16px; background: var(--bg-light); color: var(--text-light); } 
        body.dark .modal-content input { border-color: #555; background: #333; } 
        .modal-content button, .welcome-content button { background: var(--primary); color: white; padding: 12px 24px; border: none; border-radius: var(--radius); font-size: 16px; margin-top: 16px; cursor: pointer; transition: background 0.3s ease; width: 100%; } 
        .modal-content button:hover, .welcome-content button:hover { background: var(--primary-dark); } 
        .modal-content a { color: var(--primary); text-decoration: none; font-size: 13px; display: block; margin-top: 12px; }

        #goToTopBtn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background-color: var(--primary); color: white; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; display: none; z-index: 1000; box-shadow: 0 4px 12px var(--shadow-light); transition: all 0.3s ease-in-out; display: flex; align-items: center; justify-content: center; } 
        #goToTopBtn:hover { background-color: var(--primary-dark); transform: scale(1.1); } 
        body.dark #goToTopBtn { box-shadow: 0 4px 12px var(--shadow-dark); } 
        
        #find-replace-dialog { position: fixed; top: 150px; left: 50%; transform: translateX(-50%); background: var(--card-light); padding: 20px; border-radius: var(--radius); box-shadow: 0 8px 25px var(--shadow-light); z-index: 1002; display: flex; gap: 10px; align-items: center; } 
        body.dark #find-replace-dialog { background: var(--card-dark); box-shadow: 0 8px 25px var(--shadow-dark); } 
        #find-replace-dialog input { padding: 8px; border-radius: 8px; border: 1px solid #ccc; } 
        body.dark #find-replace-dialog input { background: #333; border-color: #555; color: var(--text-dark); } 
        #find-replace-dialog button { padding: 8px 12px; } 
        #find-replace-dialog .close-btn { position: absolute; top: 5px; right: 10px; background: transparent; border: none; font-size: 20px; cursor: pointer; } 
        
        .confetti { font-size: 48px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: pop 1s ease-out; pointer-events: none; z-index: 2000; } 
        @keyframes pop { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 60% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 0; } }

        /* FAQ Styling - UPDATED */
        .faq-item {
            margin-bottom: 10px;
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid #f0f0f0;
        }
        body.dark .faq-item { border-color: #3a3a3a; }

        .faq-question {
            font-size: 18px;
            color: var(--primary);
            padding: 15px 20px;
            cursor: pointer; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600; 
            transition: background-color 0.3s ease;
        }
        .faq-question.active {
            background-color: var(--primary-light-transparent);
        }

        .faq-question::after {
            content: '\f067'; /* Font Awesome Plus Icon */
            font-family: 'Font Awesome 6 Free'; 
            font-weight: 900; 
            font-size: 16px;
            transition: transform 0.3s ease;
        }
        .faq-question.active::after {
            transform: rotate(45deg); /* Rotates plus to a 'x' like close icon */
            content: '\f068'; /* Font Awesome Minus Icon */
        }

        .faq-answer {
            font-size: 15px;
            color: var(--text-light);
            line-height: 1.6; 
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out;
            padding: 0 20px; /* Side padding, top/bottom is 0 when collapsed */
        }
        .faq-answer p { padding-bottom: 15px; } /* Add padding to the content inside */
        body.dark .faq-answer { color: var(--text-dark); }
        /* End FAQ Styling */

        /* Calendar Styling */
        #calendar-container { padding: 25px; border-radius: var(--radius); box-shadow: 0 4px 15px var(--shadow-light); margin-bottom: 25px; text-align: center; }
        body.dark #calendar-container { box-shadow: 0 4px 15px var(--shadow-dark); }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-header button { background: var(--primary); color: white; border: none; border-radius: 8px; padding: 10px 15px; cursor: pointer; font-size: 18px; transition: background 0.2s ease-in-out; }
        .calendar-header button:hover { background: var(--primary-dark); }
        .calendar-header h4 { font-size: 24px; color: var(--primary); margin: 0 10px; flex-grow: 1; text-align: center; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; width: 100%; max-width: 600px; margin: 0 auto; }
        .calendar-day-header { font-weight: 600; color: #777; padding: 8px 0; text-align: center; font-size: 14px; }
        body.dark .calendar-day-header { color: #bbb; }
        .calendar-date { padding: 10px 5px; text-align: center; border-radius: 8px; background-color: #f9f9f9; cursor: pointer; transition: background-color 0.2s ease, transform 0.2s ease; font-size: 15px; font-weight: 500; min-height: 40px; display: flex; align-items: center; justify-content: center; }
        body.dark .calendar-date { background-color: #3e3e3e; }
        .calendar-date:hover:not(.empty):not(.selected) { background-color: #e0e0e0; transform: translateY(-2px); }
        body.dark .calendar-date:hover:not(.empty):not(.selected) { background-color: #4a4a4a; }
        .calendar-date.empty { background-color: transparent; cursor: default; pointer-events: none; opacity: 0.5; }
        .calendar-date.current-day { background-color: var(--primary); color: white; font-weight: 700; }
        .calendar-date.selected { background-color: var(--primary-dark); color: white; font-weight: 700; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transform: scale(1.05); }
        #exitCalendarBtn { margin-top: 20px; padding: 10px 20px; background-color: #dc3545; color: white; border: none; border-radius: var(--radius); cursor: pointer; font-size: 16px; transition: background-color 0.2s ease, transform 0.2s ease; }
        #exitCalendarBtn:hover { background-color: #c82333; transform: translateY(-2px); }

        /* Contact Us Styling */
        #contact-us-section { background: var(--card-light); padding: 25px; border-radius: var(--radius); box-shadow: 0 4px 15px var(--shadow-light); margin-bottom: 25px; }
        body.dark #contact-us-section { background: var(--card-dark); box-shadow: 0 4px 15px var(--shadow-dark); }
        #contact-us-section h2 { text-align: left; margin-bottom: 20px; }
        #contact-us-section ul { list-style: none; padding: 0; margin-top: 15px; }
        #contact-us-section li { display: flex; align-items: center; margin-bottom: 15px; font-size: 16px; }
        #contact-us-section li svg { width: 24px; height: 24px; margin-right: 12px; fill: var(--primary); }
        #contact-us-section li a { color: var(--primary); text-decoration: none; font-weight: 500; }
        #contact-us-section li a:hover { text-decoration: underline; color: var(--primary-dark); }
        #contact-us-section li span { color: var(--text-light); }
        body.dark #contact-us-section li span { color: var(--text-dark); }

        /* AdSense Container Style */
        .adsense-ad-container { margin: 25px auto; padding: 10px 0; text-align: center; min-height: 50px; background-color: var(--card-light); border-radius: var(--radius); box-shadow: 0 2px 8px var(--shadow-light); }
        body.dark .adsense-ad-container { background-color: var(--card-dark); box-shadow: 0 2px 8px var(--shadow-dark); }
        
        /* --- MEDIA QUERIES --- */
        
        /* Desktop Layout */
        @media (min-width: 1024px) {
            header {
                justify-content: space-between;
                padding-left: 5%;
                padding-right: 5%;
            }
            .header-content {
                flex-grow: 0; /* Don't grow to push profile icon */
                margin: 0 auto; /* Center title */
            }
            .open-nav-btn {
                position: relative; /* Take it out of absolute positioning */
                left: auto;
                top: auto;
                transform: none;
            }
            .profile-container {
                position: relative; /* Take it out of fixed positioning */
                top: auto;
                right: auto;
                margin-left: 20px; /* Space from nav button */
            }
            main.container.desktop-two-column {
                display: grid;
                grid-template-columns: 2fr 1.2fr;
                gap: 25px;
                align-items: flex-start;
            }
            main.container.desktop-two-column #notes,
            main.container.desktop-two-column #editor,
            main.container.desktop-two-column #whiteboard-container {
                margin-bottom: 0; /* Remove bottom margin in grid layout */
            }
        }

        /* Tablet and smaller devices */
        @media (max-width: 768px) { 
            .about-dev { flex-direction: column; text-align: center; } 
            #find-replace-dialog { flex-direction: column; width: 90%; top: 100px; } 
            .mode-switcher { border-left: none; padding-left: 0; margin-left: 0; border-top: 1px solid #ddd; padding-top: 10px; width: 100%; justify-content: center; } 
            body.dark .mode-switcher { border-top-color: #555;}
            .calendar-day-header, .calendar-date { font-size: 12px; padding: 5px 2px; min-height: 30px; }
            .sidenav a { font-size: 18px; }
            h2, h3 { font-size: 20px; }
            .blog-post h4 { font-size: 18px; }
        }
        
        /* Mobile phones */
        @media (max-width: 480px) {
            #menu-bar button, #menu-bar select { padding: 8px 10px; font-size: 13px; }
            .mode-switcher button { padding: 8px 10px; font-size: 13px;}
            .profile-container {
                position: fixed; /* Keep it fixed on small mobile */
                top: 10px;
                right: 10px;
            }
        }

    </style>
</head>
<body>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">√ó</a>
  <a href="index.html" onclick="closeNav()">Home</a>
  <a href="index.html#overview" onclick="closeNavAndScrollTo('overview')">Overview</a>
  <a href="about.html" onclick="closeNavAndGoTo('about.html')">About</a>
  <a href="blogs.html" onclick="closeNavAndGoTo('blogs.html')">Blog</a>
  <a href="index.html#faq-section" onclick="closeNavAndScrollTo('faq-section')">FAQ</a>
  <a href="privacy-policy.html" onclick="closeNavAndGoTo('privacy-policy.html')">Privacy Policy</a>
  <a href="terms-of-service.html" onclick="closeNavAndGoTo('terms-of-service.html')">Terms of Service</a>
  <a href="disclaimer.html" onclick="closeNavAndGoTo('disclaimer.html')">Disclaimer</a>
  <a href="contact.html" onclick="closeNavAndGoTo('contact.html')">Contact</a>
</div>

<header>
    <span class="open-nav-btn" onclick="openNav()">‚ò∞</span>
    <div class="header-content">
        <h1>
            <a href="index.html" style="text-decoration: none; color: inherit;">
                üìù NOTE_<span style="color:#ffc107">P@D</span>
            </a>
        </h1>
        <p style="margin-top: 5px; font-weight: 300; opacity: 0.9;">Notepad, Whiteboard, and To-Do List</p>
    </div>
    <div id="profile-container" class="profile-container hidden">
        <img id="profile-icon" src="https://ui-avatars.com/api/?name=U" alt="Profile" tabindex="0" width="42" height="42">
        <div id="profile-dropdown" class="profile-dropdown hidden">
            <div class="dropdown-header">
                <img id="userPic" src="https://ui-avatars.com/api/?name=U&background=random&color=fff" alt="Profile" width="48" height="48"> 
                <div>
                    <span id="userNameDisplay">User Name</span>
                    <small id="userEmailDisplay" style="color: #888; display: block; font-weight: 400;"></small>
                </div>
            </div>
            <ul class="dropdown-menu">
                <li><a href="#" id="editProfilePhotoBtn"><i class="fas fa-camera fa-fw"></i> Edit Profile Photo</a></li>
                <li><a href="#" id="verifyEmailBtn"><i class="fas fa-envelope fa-fw"></i> Verify Email <span id="emailVerifiedStatus"></span></a></li>
                <li><a href="#" id="resetPasswordBtn"><i class="fas fa-key fa-fw"></i> Reset Password</a></li>
                <li class="divider"></li>
                <li><a href="#" id="manageAccountBtn"><i class="fas fa-user-cog fa-fw"></i> Manage Account</a></li> 
                <li class="divider"></li>
                <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt fa-fw"></i> Logout</a></li>
            </ul>
        </div>
    </div>
</header>
<input type="file" id="photoUpload" class="hidden" accept="image/*">

<main id="main-container" class="container">
    <div class="info-section" id="about">
        <h3>About the Developer: Bishal Mishra</h3>
        <div class="about-dev">
            <img src="https://i.ibb.co/Y4ygWpC2/Untitled-design.png" alt="Bishal Mishra, Developer of Note P@d" border="0" width="120" height="120">
            <div class="about-dev-text">
                <p>Note P@d is meticulously crafted and passionately maintained by <strong><a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Bishal Mishra</a></strong>, a web developer dedicated to building digital tools that are simple, powerful, and prioritize user privacy and experience. With a keen interest in productivity and web technologies, Bishal envisioned Note P@d as a go-to solution for individuals seeking a versatile and reliable online workspace.</p>
                <p>The philosophy behind Note P@d is to provide a comprehensive suite of tools that aid in daily organization and creativity, without unnecessary complexities. This project is a testament to the power of modern web capabilities to create applications that are accessible, efficient, and user-centric. Bishal believes in continuous improvement and values user feedback to make Note P@d even better.</p>
                <p>Connect with Bishal on <a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Facebook</a> or visit his <a href="https://bishalmishra.com" target="_blank" rel="noopener noreferrer">personal website</a> to learn more about his work and other projects.</p>
            </div>
        </div>
    </div>
    <div class="info-section" id="how-it-works">
        <h3>How Note P@d Works: Secure, Offline, and In Your Browser</h3>
        <p>Note P@d leverages cutting-edge web technologies like HTML5, CSS3, and JavaScript to deliver a smooth, responsive, and private user experience. Here‚Äôs a breakdown of its core principles:</p>
        <ul>
            <li><strong>Local Storage First:</strong> For basic usage without an account, all notes, drawings, and to-do lists you create are stored directly in your browser‚Äôs <code>localStorage</code>. This means your data never leaves your computer by default and isn't transmitted to any external server, ensuring 100% privacy on your device.</li>
            <li><strong>Offline Functionality (PWA):</strong> Note P@d is a Progressive Web App (PWA). After your first visit, it caches essential resources, allowing you to use most features even without an active internet connection. This makes it a reliable tool wherever you are.</li>
            <li><strong>Client-Side Processing:</strong> Features like PDF export for notes and PNG downloads for whiteboards are handled by powerful JavaScript libraries (like jsPDF) directly within your browser. This maintains speed and privacy.</li>
            <li><strong>Optional User Accounts:</strong> While basic use requires no sign-up, creating an account (via email or Google Sign-In) unlocks features like multi-device synchronization (premium), profile management, and potentially other collaborative tools in the future. Account data is handled securely.</li>
            <li><strong>Intuitive Interface:</strong> We believe in simplicity. The interface is designed to be clean and intuitive, allowing you to focus on your tasks without a steep learning curve.</li>
        </ul>
        <p>Remember, if you are not using an account with cloud sync, clearing your browser's site data will permanently delete your locally stored notes. Always use the export features or consider an account for important data backup.</p>
    </div>
</main>

<!-- Welcome Popup and Auth Modal are now initially hidden and only appear if explicitly triggered (e.g., by save button) -->
<div id="welcomePopup" class="welcome-popup hidden"> <div class="welcome-content"> <h2>Welcome to Note P@d!</h2> <p>Capture your ideas. Organize your thoughts. Let‚Äôs get started!</p> <button id="getStartedBtn">Get Started</button> </div> </div>
<div id="authModal" class="modal hidden"> <div class="modal-content"> <h2 id="authTitle">Sign In to Note P@d</h2> <input type="text" id="authUsername" placeholder="Username (Email)" autocomplete="username"/> <input type="password" id="authPassword" placeholder="Password" autocomplete="current-password"/> <button id="authSubmit">Sign In</button> <div id="googleSignInDiv" style="margin: 20px auto 0; display: flex; justify-content: center;"></div> <a href="#" id="forgotPassword">Forgot Password?</a> <p id="switchMode">Don't have an account? <a href="#">Sign Up</a></p> </div> </div>
<div id="find-replace-dialog" class="hidden"> <input type="text" id="find-input" placeholder="Find..."> <input type="text" id="replace-input" placeholder="Replace with..."> <button id="replace-btn">Replace</button> <button id="replace-all-btn">Replace All</button> <button id="close-find-replace" class="close-btn" title="Close">√ó</button> </div>
<button id="goToTopBtn" title="Go to top" aria-label="Go to top">‚Üë</button>
<div id="confetti" class="confetti hidden">üéâ</div>
<audio id="loginSound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>

<footer>
   <p>Copyright ¬© <span id="currentYear"></span> <a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Bishal Mishra</a> | All Rights Reserved.</p>
   <div>
        <a href="privacy-policy.html">Privacy Policy</a> |
        <a href="terms-of-service.html">Terms of Service</a> |
        <a href="disclaimer.html">Disclaimer</a> |
        <a href="contact.html">Contact Us</a>
   </div>
</footer>


<script>
// --- GLOBAL VARIABLES (minimal set for this page) ---
let isSignUp = false;

const goToTopBtn = document.getElementById('goToTopBtn');
const welcomePopup = document.getElementById('welcomePopup');
const authModal = document.getElementById('authModal');
const authTitle = document.getElementById('authTitle');
const authUsername = document.getElementById('authUsername');
const authPassword = document.getElementById('authPassword');
const authSubmit = document.getElementById('authSubmit');
const switchAuthModeLink = document.getElementById('switchMode');
const confetti = document.getElementById('confetti');
const loginSound = document.getElementById('loginSound');

const profileContainer = document.getElementById('profile-container');
const profileIcon = document.getElementById('profile-icon');
const profileDropdown = document.getElementById('profile-dropdown');
const userPic = document.getElementById('userPic');
const userNameDisplay = document.getElementById('userNameDisplay');
const userEmailDisplay = document.getElementById('userEmailDisplay');
const emailVerifiedStatus = document.getElementById('emailVerifiedStatus');
const logoutBtn = document.getElementById('logoutBtn');
const verifyEmailBtn = document.getElementById('verifyEmailBtn');
const resetPasswordBtn = document.getElementById('resetPasswordBtn');
const editProfilePhotoBtn = document.getElementById('editProfilePhotoBtn');
const photoUploadInput = document.getElementById('photoUpload');
const manageAccountBtn = document.getElementById('manageAccountBtn'); 

const QR_CODE_IMAGE_URL = "https://i.ibb.co/L8nCNtjv/IMG-0120.jpg"; 

// --- SIDENAV & SCROLL FUNCTIONS ---
function openNav() { document.getElementById("mySidenav").style.width = "280px"; }
function closeNav() { document.getElementById("mySidenav").style.width = "0"; }
function scrollToSection(selector) { const element = document.getElementById(selector); if (element) element.scrollIntoView({ behavior: 'smooth' }); }
function closeNavAndScrollTo(sectionId) { closeNav(); setTimeout(() => scrollToSection(sectionId), 300); }
function closeNavAndGoTo(url) { closeNav(); setTimeout(() => window.location.href = url, 300); }

document.addEventListener("DOMContentLoaded", () => {
    loadDarkMode();
    checkAuthStatus(); 
    attachEventListeners();
    document.getElementById('currentYear').textContent = new Date().getFullYear();
});

window.onload = function() {
    if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
        initGoogleSignIn();
    } else {
        let attempts = 0;
        const intervalId = setInterval(() => {
            attempts++;
            if (typeof google !== 'undefined' && google.accounts && google.accounts.id) {
                initGoogleSignIn();
                clearInterval(intervalId);
            } else if (attempts > 20) {
                console.error("Google Sign-In did not initialize in time.");
                if(document.getElementById('googleSignInDiv')) {
                     document.getElementById('googleSignInDiv').innerHTML = "Google Sign-In failed to load. Please try refreshing.";
                }
                clearInterval(intervalId);
            }
        }, 500);
    }
};

function attachEventListeners() {
    window.onscroll = () => { 
        if (goToTopBtn) goToTopBtn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "flex" : "none"; 
    };
    if (goToTopBtn) goToTopBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
    
    const getStartedBtn = document.getElementById('getStartedBtn');
    if (getStartedBtn) getStartedBtn.onclick = () => { 
        if(welcomePopup) welcomePopup.classList.add("hidden"); 
        if(authModal) authModal.classList.remove("hidden"); 
    }; 
    
    if (switchAuthModeLink) switchAuthModeLink.onclick = (e) => { 
        e.preventDefault(); 
        isSignUp = !isSignUp; 
        if(authTitle) authTitle.textContent = isSignUp ? "Create your Account" : "Welcome Back"; 
        if(authSubmit) authSubmit.textContent = isSignUp ? "Sign Up" : "Sign In"; 
        switchAuthModeLink.innerHTML = isSignUp ? 'Already have an account? <a href="#">Sign In</a>' : 'Don‚Äôt have an account? <a href="#">Sign Up</a>'; 
    };
    
    if (authSubmit) authSubmit.onclick = handleAuthSubmit;
    
    if (profileIcon) profileIcon.addEventListener('click', toggleProfileDropdown);
    document.addEventListener('click', closeDropdownOnClickOutside);
    if (logoutBtn) logoutBtn.addEventListener('click', handleLogout);
    if (verifyEmailBtn) verifyEmailBtn.addEventListener('click', handleVerifyEmail);
    if (resetPasswordBtn) resetPasswordBtn.addEventListener('click', handleResetPassword);
    if (manageAccountBtn) manageAccountBtn.addEventListener('click', handleManageAccount); 
    
    if (editProfilePhotoBtn) editProfilePhotoBtn.addEventListener('click', (e) => { 
        e.preventDefault(); 
        if(photoUploadInput) photoUploadInput.click();
    });
    if (photoUploadInput) photoUploadInput.addEventListener('change', handlePhotoUpload);
}


function toggleProfileDropdown() { if(profileDropdown) profileDropdown.classList.toggle('hidden'); }
function closeDropdownOnClickOutside(event) { if (profileContainer && !profileContainer.contains(event.target) && profileDropdown && !profileDropdown.classList.contains('hidden')) profileDropdown.classList.add('hidden'); }

function checkAuthStatus() {
    const currentUserId = getCurrentUserId();
    if (currentUserId) {
        showUserInfo();
    } else {
        if(profileContainer) profileContainer.classList.add('hidden');
    }
}

function showUserInfo() {
    const username = localStorage.getItem('currentUser');
    const picUrl = localStorage.getItem('userPic');
    const email = localStorage.getItem('userEmail');
    const isVerified = localStorage.getItem('emailVerified') === 'true';

    if (!username || !profileContainer) return;

    profileContainer.classList.remove('hidden');
    
    const avatarUrl = picUrl || `https://ui-avatars.com/api/?name=${encodeURIComponent(username.substring(0,2))}&background=random&color=fff&size=48`;
    if(profileIcon) profileIcon.src = avatarUrl;
    if(userPic) userPic.src = avatarUrl;
    if(userNameDisplay) userNameDisplay.textContent = username;
    if(userEmailDisplay) userEmailDisplay.textContent = email || '';

    if (emailVerifiedStatus) {
        if (isVerified) {
            emailVerifiedStatus.innerHTML = '<i class="fas fa-check-circle" title="Email is verified"></i>';
            if(verifyEmailBtn) { verifyEmailBtn.style.opacity = '0.6'; verifyEmailBtn.style.cursor = 'default'; }
        } else {
            emailVerifiedStatus.innerHTML = '<i class="fas fa-times-circle" title="Email not verified"></i>';
            if(verifyEmailBtn) { verifyEmailBtn.style.opacity = '1'; verifyEmailBtn.style.cursor = 'pointer'; }
        }
    }
    
    if(verifyEmailBtn && verifyEmailBtn.parentElement) verifyEmailBtn.parentElement.style.display = 'block';

    const provider = localStorage.getItem('authProvider');
    if (resetPasswordBtn && resetPasswordBtn.parentElement) {
        if (provider === 'google') {
            resetPasswordBtn.parentElement.style.display = 'none';
            if (isVerified && verifyEmailBtn && verifyEmailBtn.parentElement) {
                verifyEmailBtn.parentElement.style.display = 'none';
            }
        } else {
            resetPasswordBtn.parentElement.style.display = 'block';
        }
    }
}

function handleAuthSubmit() {
    if(!authUsername || !authPassword) return;
    const username = authUsername.value.trim();
    const password = authPassword.value.trim();
    if (!username || !password) { alert("Please fill in all fields"); return; }
    const users = JSON.parse(localStorage.getItem("users") || "{}");
    if (isSignUp) {
        if (users[username]) { alert("Username (email) already exists."); return; }
        users[username] = password; 
        localStorage.setItem("users", JSON.stringify(users));
        localStorage.setItem('authProvider', 'email');
        localStorage.setItem('userEmail', username);
        localStorage.setItem('emailVerified', 'false');
        localStorage.setItem("currentUser", username);
        loginSuccess(username, "", username);
    } else {
        if (!users[username] || users[username] !== password) { alert("Invalid credentials"); return; }
        if (localStorage.getItem('userEmail') !== username) localStorage.setItem('userEmail', username);
        if (localStorage.getItem('authProvider') !== 'email') localStorage.setItem('authProvider', 'email');
        if (localStorage.getItem('emailVerified') === null) localStorage.setItem('emailVerified', 'false');
        localStorage.setItem("currentUser", username);
        loginSuccess(username, "", username);
    }
}

function handleLogout(e) {
    if(e) e.preventDefault();
    localStorage.removeItem("currentUser");
    localStorage.removeItem("userPic");
    localStorage.removeItem("currentUserId");
    localStorage.removeItem("emailVerified");
    localStorage.removeItem("userEmail");
    localStorage.removeItem("authProvider");
    
    if (typeof google !== 'undefined' && google.accounts && google.accounts.id) google.accounts.id.disableAutoSelect();
    
    if(profileContainer) profileContainer.classList.add('hidden');
    if(profileDropdown && !profileDropdown.classList.contains('hidden')) profileDropdown.classList.add('hidden');
    
    if(authModal) authModal.classList.remove("hidden");
    // No notes or editor on this page to clear
}

function handlePhotoUpload(event) {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e) => {
        localStorage.setItem('userPic', e.target.result);
        showUserInfo(); 
        alert("Profile photo updated!");
    };
    reader.readAsDataURL(file);
}

function handleVerifyEmail(e) {
    e.preventDefault();
    if (localStorage.getItem('emailVerified') === 'true') { alert('Your email is already verified.'); return; }
    if (localStorage.getItem('authProvider') === 'google') { alert('Google accounts are typically pre-verified or managed via Google.'); return; }
    
    const verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
    alert(`A verification code has been "sent" to your email (for demo purposes, it's shown here).\n\nYour code is: ${verificationCode}\n\nPlease enter this code in the prompt.`);
    const userCode = prompt("Please enter the 6-digit verification code:");
    if (userCode === verificationCode) { localStorage.setItem('emailVerified', 'true'); alert("Email verified successfully!"); showUserInfo(); } 
    else if (userCode) { alert("Incorrect code. Please try again."); } 
    else { alert("Verification cancelled."); }
}

function handleResetPassword(e) {
    e.preventDefault();
    if (localStorage.getItem('authProvider') === 'google') { alert("Password reset is managed through your Google account."); return; }
    if (!localStorage.getItem('currentUser')) { alert("Please sign in to reset your password."); return; }

    const newPassword = prompt("Enter your new password (min 4 characters):");
    if (!newPassword || newPassword.length < 4) { if (newPassword !== null) alert("Password is too short."); return; }

    const confirmPassword = prompt("Confirm your new password:");
    if (newPassword !== confirmPassword) { alert("Passwords do not match."); return; }

    const username = localStorage.getItem('userEmail');
    if(!username) { alert("User email not found. Cannot reset password."); return;}
    const users = JSON.parse(localStorage.getItem("users") || "{}");
    if (users[username]) { users[username] = newPassword; localStorage.setItem("users", JSON.stringify(users)); alert("Your password has been reset successfully!"); } 
    else { alert("An error occurred. Could not find user to update password."); }
}

function handleManageAccount(e) { e.preventDefault(); alert("You can manage your profile photo and email verification from the dropdown. For other account settings, please contact support if needed."); }

function loginSuccess(username, picUrl, userId) {
    localStorage.setItem("currentUserId", userId);
    if(picUrl) localStorage.setItem("userPic", picUrl);
    showUserInfo();
    if(authModal) authModal.classList.add("hidden");
    if(confetti) confetti.classList.remove("hidden");
    if(loginSound) loginSound.play().catch(e => console.warn("Audio play failed:", e));
    setTimeout(() => { if(confetti) confetti.classList.add("hidden"); }, 1200);
    // No notes or editor on this page to load draft/display
}

function initGoogleSignIn() {
    try {
        if (!google || !google.accounts || !google.accounts.id) { console.error("Google Sign-In library not fully loaded."); if(document.getElementById('googleSignInDiv')) document.getElementById('googleSignInDiv').innerHTML = "Google Sign-In failed to load."; return; }
        google.accounts.id.initialize({ client_id: "107788525119-7mkm9t2pqe53q85ltenn4lr3av7itdfh.apps.googleusercontent.com", callback: handleGoogleSignIn });
        const googleSignInButtonContainer = document.getElementById("googleSignInDiv");
        if (googleSignInButtonContainer) google.accounts.id.renderButton(googleSignInButtonContainer, { theme: "outline", size: "large", shape: "pill", width: "300" });
        else console.warn("Google Sign-In button container not found.");
    } catch (error) {
        console.error("Google GSI could not be initialized.", error);
        const googleSignInButtonContainer = document.getElementById('googleSignInDiv');
        if (googleSignInButtonContainer) googleSignInButtonContainer.innerHTML = "Google Sign-In failed to load.";
    }
}

function jwtDecode(token) { try { return JSON.parse(atob(token.split('.')[1])); } catch (e) { console.error("Failed to decode JWT", e); return null; } }

function handleGoogleSignIn(response) {
    const data = jwtDecode(response.credential);
    if (!data) { alert("Failed to process Google Sign-In. Please try again."); return;}
    const name = data.name || data.email;
    const picture = data.picture || "";
    const userId = data.sub;
    const email = data.email;
    const emailVerified = data.email_verified === true || data.email_verified === 'true';
    localStorage.setItem("currentUser", name);
    localStorage.setItem('authProvider', 'google');
    localStorage.setItem('userEmail', email);
    localStorage.setItem('emailVerified', emailVerified.toString());
    loginSuccess(name, picture, userId);
}

function getCurrentUserId() { return localStorage.getItem('currentUserId'); }

function loadDarkMode() { if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark'); }
function toggleDark() { document.body.classList.toggle('dark'); localStorage.setItem('darkMode', document.body.classList.contains('dark')); }
async function hashPassword(password) { if (!password) return ''; try {const encoder = new TextEncoder(); const data = encoder.encode(password); const hashBuffer = await crypto.subtle.digest('SHA-256', data); const hashArray = Array.from(new Uint8Array(hashBuffer)); return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');} catch(e) { console.error("Password hashing failed", e); return 'error_hashing_password'; }}

</script>
</body>
</html>