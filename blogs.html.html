<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <title>Productivity Blog & Tips | Note Pad - Online Notepad, Whiteboard & To-Do List</title>
    
    <meta name="description" content="Supercharge your productivity with expert tips from the Note Pad blog. Learn to master our free online notepad, whiteboard, and to-do list for better organization and efficiency. Read our latest articles."/>
    
    <meta name="keywords" content="blog, productivity tips, Note Pad blog, online notepad, whiteboard, to-do list, organization, study tools, free productivity app, task management, mind mapping, nepali fonts, 3uTools, iOS, Payoneer, Nepal, Typeshala, IMEI registration, MDMS Nepal"/>
    
    <meta name="author" content="Bishal Mishra">
    <meta name="robots" content="index, follow">

    <link rel="canonical" href="https://bishalmishra.com/blogs.html">

    <meta property="og:title" content="Productivity Blog & Tips | Note Pad - Online Notepad, Whiteboard & To-Do List" />
    <meta property="og:description" content="Supercharge your productivity with expert tips from the Note Pad blog. Learn to master our free online notepad, whiteboard, and to-do list for better organization and efficiency." />
    <meta property="og:image" content="https://i.imgur.com/kR1k1jU.png" />
    <meta property="og:url" content="https://bishalmishra.com/blogs.html" />
    <meta property="og:type" content="website" />
    
    <meta name="msvalidate.01" content="F28FD042305E7D060B4355FA59E662D8" />
    <link rel="manifest" href="manifest.json">
        
    <meta name="yandex-verification" content="af349c5874d738ed" />
   
    <link rel="icon" type="image/png" href="images/favicon.png"> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- AdSense SCRIPT (typically in HEAD) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3010913100191778"
         crossorigin="anonymous"></script>
    <!-- End AdSense SCRIPT -->
   
    <!-- SEO: Structured Data for Website and Blog -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Note Pad",
      "url": "https://bishalmishra.com/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://bishalmishra.com/blogs.html?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "Blog - Note Pad - Modern Online Notepad, Whiteboard & To-Do List",
      "url": "https://bishalmishra.com/blogs.html",
      "description": "Discover productivity tips, news, and insights from Note Pad's blog. Learn how to maximize your efficiency with our online notepad, whiteboard, and to-do list.",
      "publisher": {
        "@type": "Organization",
        "name": "Note Pad by Bishal Mishra",
        "logo": {
          "@type": "ImageObject",
          "url": "https://bishalmishra.com/images/favicon.png"
        }
      }
    }
    </script>
    <!-- End SEO Scripts -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-light: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            --text-light: #333;
            --card-light: #ffffff;
            --shadow-light: rgba(0, 0, 0, 0.08);

            --bg-dark: linear-gradient(120deg, #2b2b2b 0%, #1e1e1e 100%);
            --text-dark: #e0e0e0;
            --card-dark: #2c2c2c;
            --shadow-dark: rgba(0, 0, 0, 0.25);
           
            --primary: #8c53ff;
            --primary-dark: #7042cc;
            --primary-light-transparent: rgba(140, 83, 255, 0.1);
            --radius: 12px;
        }

        html { height: 100%; scroll-behavior: smooth; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg-light); color: var(--text-light); line-height: 1.6; transition: background 0.5s ease, color 0.5s ease; display: flex; flex-direction: column; min-height: 100vh; }
        body.dark { background: var(--bg-dark); color: var(--text-dark); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        main.container { 
            width: 100%; 
            max-width: 100%; 
            margin: 0; 
            padding: 20px 0; 
            flex-grow: 1; 
        } 
        
        /* START: MODIFIED HEADER STYLES */
        header { 
            background: var(--primary); 
            color: white; 
            padding: 15px 5%; 
            box-shadow: 0 4px 15px var(--shadow-light); 
            z-index: 10; 
            display: flex; 
            justify-content: space-between; /* This is key for the layout */
            align-items: center; 
            position: relative;
        }

        .header-left, .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1; /* Make left and right sections take up equal space */
        }
        
        .header-left {
            justify-content: flex-start;
        }

        .header-right {
            justify-content: flex-end;
        }

        .header-content { 
            text-align: center; 
            flex-grow: 0; /* Do not allow logo to grow, keeping it centered */
        }
        /* END: MODIFIED HEADER STYLES */

        body.dark header { box-shadow: 0 4px 15px var(--shadow-dark); }
        
        /* MODIFIED FOOTER STYLES */
        footer { 
            margin-top: auto; 
            padding: 20px; 
            text-align: center; 
            background: var(--primary); /* Explicitly set primary background */
            color: white; /* Explicitly set white text */
            box-shadow: 0 4px 15px var(--shadow-light); 
            transition: background 0.5s ease, color 0.5s ease; 
        }
        body.dark footer { 
            background: var(--card-dark); /* Dark mode background for footer */
            color: var(--text-dark); /* Dark mode text for footer */
            box-shadow: 0 4px 15px var(--shadow-dark); 
        }
        footer a { 
            color: white; /* Ensure white links in light mode */
            font-weight: 600; 
            text-decoration: none; 
            transition: opacity 0.2s; 
            margin: 0 10px;  
        }
        body.dark footer a {
            color: var(--primary); /* Make links primary color in dark mode footer for contrast */
        }
        footer a:hover { opacity: 0.8; text-decoration: underline; }
        footer p { margin-bottom: 10px; } 
        
        .sidenav { height: 100%; width: 0; position: fixed; z-index: 1002; top: 0; left: 0; overflow-x: hidden; transition: 0.5s; padding-top: 60px; background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px); }
        body.dark .sidenav { background-color: rgba(30, 30, 30, 0.95); }
        .sidenav a { padding: 10px 15px 10px 32px; text-decoration: none; font-size: 20px; font-weight: 600; color: var(--text-light); display: block; transition: 0.3s; }
        body.dark .sidenav a { color: var(--text-dark); }
        .sidenav a:hover { color: var(--primary); }
        .sidenav .closebtn { position: absolute; top: 10px; right: 25px; font-size: 36px; margin-left: 50px; }

        /* MODIFIED: open-nav-btn positioning is handled by flexbox now */
        .open-nav-btn { font-size: 28px; cursor: pointer; color: white; transition: transform 0.2s; }
        .open-nav-btn:hover { transform: scale(1.1); }
        
        #live-clock, #live-weather {
            color: white;
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
        }

        #live-clock {
            font-family: 'Inter', sans-serif;
        }

        #live-weather i:first-child { /* Targets the main weather icon */
            margin-right: 8px;
            color: #ffc107;
        }
        
        #weather-refresh-btn {
            margin-left: 10px;
            cursor: pointer;
            transition: color 0.2s ease, transform 0.2s ease;
            display: inline-block; /* Needed for transform */
        }
        #weather-refresh-btn:hover {
            color: #ffc107; /* Highlight on hover */
            transform: scale(1.2) rotate(90deg);
        }

        #blogs-section { 
            background: var(--card-light); 
            padding: 40px 5%; 
            margin-bottom: 25px; 
            text-align: left; 
            border-radius: var(--radius); /* Added for consistency */
            box-shadow: 0 4px 15px var(--shadow-light); /* Added for consistency */
        }
        body.dark #blogs-section { 
            background: var(--card-dark); 
            box-shadow: 0 4px 15px var(--shadow-dark); 
        }
       
        h2, h3 { font-size: 24px; margin-bottom: 20px; color: var(--primary); text-align: center; }
        h4 { font-size: 20px; } 
        ol { list-style-position: inside; padding-left: 10px; margin-bottom: 15px; } 
        h4, h5, ol, ul { text-align: left; } 
        #blog-main-heading { font-size: 28px; }

        .blog-layout-container { display: flex; gap: 30px; margin-top: 30px; }
        #blog-posts-container { flex: 1; min-width: 0; }
        
        #blog-sidebar { 
            width: 300px; 
            flex-shrink: 0; 
            display: flex; 
            flex-direction: column; 
            gap: 25px; 
            position: sticky; /* Make sidebar sticky */
            top: 20px; /* Adjust as needed, considering header height */
            align-self: flex-start; /* Ensure it sticks to the top of its container */
            max-height: calc(100vh - 40px); /* Limit height to viewport - padding */
            overflow-y: auto; /* Enable scrolling for long sidebars */
        }
        /* Hide scrollbar for aesthetics */
        #blog-sidebar::-webkit-scrollbar { width: 0; }
        #blog-sidebar { -ms-overflow-style: none; scrollbar-width: none; }

        .sidebar-widget { background: var(--bg-light); padding: 20px; border-radius: var(--radius); box-shadow: 0 4px 10px var(--shadow-light); transition: background 0.5s ease; }
        body.dark .sidebar-widget { background: #333; box-shadow: 0 4px 15px var(--shadow-dark); }
        .sidebar-widget h5 { color: var(--primary); margin-bottom: 15px; font-size: 1.1em; font-weight: 700; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        body.dark .sidebar-widget h5 { border-bottom-color: #444; }

        #blog-sidebar input[type="text"], #blog-sidebar input[type="email"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: var(--radius); font-size: 15px; background: var(--card-light); color: var(--text-light); transition: border-color 0.3s ease; }
        body.dark #blog-sidebar input[type="text"], body.dark #blog-sidebar input[type="email"] { background: #2b2b2b; border-color: #555; color: var(--text-dark); }
        #blog-sidebar input:focus { outline: none; border-color: var(--primary); }
        #sidebar-newsletter-btn { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: var(--radius); cursor: pointer; font-size: 16px; width: 100%; transition: background 0.2s ease; margin-top: 10px; }
        #sidebar-newsletter-btn:hover { background: var(--primary-dark); }

        #sidebar-recent-posts { list-style: none; padding: 0; }
        #sidebar-recent-posts li { margin-bottom: 12px; }
        #sidebar-recent-posts li a { color: var(--text-light); text-decoration: none; transition: color 0.2s ease; font-size: 15px; font-weight: 500; }
        body.dark #sidebar-recent-posts li a { color: var(--text-dark); }
        #sidebar-recent-posts li a:hover { color: var(--primary); }

        #sidebar-tags-cloud { display: flex; flex-wrap: wrap; gap: 8px; }
        #sidebar-tags-cloud a { display: inline-block; background-color: #e0e0e0; color: #555; padding: 6px 12px; border-radius: 6px; text-decoration: none; font-size: 14px; transition: background-color 0.2s ease, color 0.2s ease; }
        body.dark #sidebar-tags-cloud a { background-color: #4a4a4a; color: #ccc; }
        #sidebar-tags-cloud a:hover { background-color: var(--primary); color: white; }

        .blog-post { background: transparent; padding-bottom: 25px; margin-bottom: 25px; text-align: left; border-bottom: 1px solid #e9e9e9; }
        body.dark .blog-post { border-bottom-color: #3a3a3a; }
        .blog-post:last-of-type { border-bottom: none; margin-bottom: 0; }
        
        .blog-post h4 { color: var(--primary); margin-bottom: 10px; font-size: 24px; font-weight: 700; }
        .blog-post-meta { font-size: 14px; color: #888; margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 20px; align-items: center; }
        body.dark .blog-post-meta { color: #aaa; }
        .blog-post-meta i { margin-right: 6px; color: var(--primary); }
        
        .blog-post-content { font-size: 16px; line-height: 1.8; color: var(--text-light); }
        body.dark .blog-post-content { color: var(--text-dark); }
        .blog-post-content p { margin-bottom: 15px; }
        .blog-post-content ul, .blog-post-content ol { list-style: disc; padding-left: 25px; margin-bottom: 15px; }
        .blog-post-content ol { list-style: decimal; }
        .blog-post-content li { margin-bottom: 8px; }
        .blog-post-content a { color: var(--primary); text-decoration: none; font-weight: 600; transition: color 0.2s ease; }
        .blog-post-content a:hover { color: var(--primary-dark); text-decoration: underline; }
        .blog-post-content .step-image { max-width: 100%; height: auto; border-radius: var(--radius); margin: 10px 0 20px; box-shadow: 0 4px 15px var(--shadow-light); }
        body.dark .blog-post-content .step-image { box-shadow: 0 4px 15px var(--shadow-dark); }
        
        .blog-post-image { max-width: 100%; height: auto; border-radius: var(--radius); margin-bottom: 20px; display: block; box-shadow: 0 8px 20px var(--shadow-light); }
        body.dark .blog-post-image { box-shadow: 0 8px 25px var(--shadow-dark); }

        .blog-content-short { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis; margin-bottom: 15px; }
        .blog-content-full { display: none; margin-bottom: 15px; }
        
        .read-more-btn { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: var(--radius); cursor: pointer; font-size: 14px; font-weight: 600; transition: background 0.2s ease-in-out; display: inline-block; margin-top: 10px; }
        .read-more-btn:hover { background: var(--primary-dark); }

        .blog-post-content .see-result-btn, .blog-post-content .download-btn {
            display: block; width: fit-content; margin: 25px auto; color: white !important; padding: 12px 25px; border-radius: var(--radius); text-decoration: none; font-weight: bold; font-size: 1.1em; transition: all 0.3s ease; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center;
        }
        .blog-post-content .see-result-btn { background-color: #28a745; }
        .blog-post-content .see-result-btn:hover { background-color: #218838; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }

        .blog-post-content .download-btn { background-color: #007bff; }
        .blog-post-content .download-btn:hover { background-color: #0056b3; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        
        /* START: 3uTools download section */
        .download-options-container { display: flex; gap: 20px; margin: 25px 0; flex-wrap: wrap; justify-content: center; padding: 20px; background: var(--primary-light-transparent); border-radius: var(--radius); }
        .download-option { flex: 1; min-width: 250px; text-align: center; }
        .download-option h5 { color: var(--primary); margin-bottom: 15px; font-size: 1.2em; text-align: center; }
        .download-option h5 i { margin-right: 8px; }
        .download-btn-specific { display: block; background-color: #007bff; color: white !important; padding: 12px 20px; border-radius: var(--radius); text-decoration: none; font-weight: 600; margin-bottom: 10px; transition: all 0.3s ease; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .download-btn-specific:hover { background-color: #0056b3; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); color: white !important; text-decoration: none; }
        /* END: 3uTools download section */

        /* START: Comments Section Styles */
        .comments-section { 
            margin-top: 30px; 
            padding-top: 20px; 
            border-top: 1px solid #e9e9e9; 
            display: none; /* HIDDEN BY DEFAULT */
        }
        body.dark .comments-section { border-top-color: #3a3a3a; }
        .comments-section h5 { font-size: 18px; color: var(--primary); margin-bottom: 20px; }
        .comment-form { display: flex; flex-direction: column; gap: 15px; margin-bottom: 25px; }
        .comment-form input, .comment-form textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: var(--radius); font-size: 15px; background: var(--card-light); color: var(--text-light); font-family: 'Poppins', sans-serif; transition: border-color 0.3s ease; }
        body.dark .comment-form input, body.dark .comment-form textarea { background: #2b2b2b; border-color: #555; color: var(--text-dark); }
        .comment-form input:focus, .comment-form textarea:focus { outline: none; border-color: var(--primary); }
        .comment-form button { align-self: flex-start; background: var(--primary); color: white; border: none; padding: 10px 25px; border-radius: var(--radius); cursor: pointer; font-size: 15px; font-weight: 600; transition: background 0.2s ease; }
        .comment-form button:hover { background: var(--primary-dark); }
        .comment-list { list-style: none; padding: 0; }
        .comment-item { background: var(--primary-light-transparent); padding: 15px; border-radius: var(--radius); margin-bottom: 15px; }
        body.dark .comment-item { background: rgba(60, 60, 60, 0.5); }
        .comment-item p { margin: 0; }
        .comment-meta { font-weight: 700; font-size: 15px; margin-bottom: 5px; }
        .comment-meta span { font-size: 12px; font-weight: 400; color: #888; margin-left: 10px; }
        body.dark .comment-meta span { color: #aaa; }
        .comment-text { font-size: 15px; }
        /* END: Comments Section Styles */
        
        /* START: New styles for sidebar additions */
        .social-links { display: flex; gap: 15px; justify-content: center; margin-top: 10px; }
        .social-links a { color: var(--primary); font-size: 20px; transition: transform 0.2s ease, color 0.2s ease; }
        .social-links a:hover { color: var(--primary-dark); transform: scale(1.2); }
        .qr-code-img { display: block; margin: 10px auto; border-radius: var(--radius); }
        .app-download-links { display: flex; flex-direction: column; gap: 10px; margin-top: 15px; }
        .app-download-btn { background-color: #333; color: white !important; text-decoration: none; padding: 10px; border-radius: 8px; text-align: center; font-weight: 600; transition: background-color 0.2s ease; }
        body.dark .app-download-btn { background-color: #555; }
        .app-download-btn:hover { background-color: #111; color: white !important; text-decoration: none; }
        body.dark .app-download-btn:hover { background-color: #666; }
        /* END: New styles for sidebar additions */

        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* MODIFIED: Removed margin-left: auto; as parent handles alignment now */
        .profile-container { position: relative; z-index: 999; }
        #profile-icon { width: 42px; height: 42px; border-radius: 50%; cursor: pointer; border: 2px solid #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.2); transition: transform 0.2s ease-in-out; object-fit: cover; }
        #profile-icon:hover, #profile-icon:focus { transform: scale(1.1); }
        .profile-dropdown { position: absolute; top: 55px;  right: 0;  width: 260px; background: var(--card-light); border-radius: var(--radius); box-shadow: 0 8px 25px var(--shadow-light); border: 1px solid #eee; overflow: hidden; animation: fadeIn 0.3s ease; transition: opacity 0.3s ease, transform 0.3s ease; }
        body.dark .profile-dropdown { background: var(--card-dark); box-shadow: 0 8px 25px var(--shadow-dark); border-color: #444; }
        .dropdown-header { display: flex; align-items: center; gap: 15px; padding: 15px; border-bottom: 1px solid #f0f0f0; }
        body.dark .dropdown-header { border-bottom-color: #444; }
        .dropdown-header img { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; }
        .dropdown-header span { font-weight: 600; font-size: 16px; word-break: break-all; }
        body.dark .dropdown-header small { color: #bbb !important; }
        .dropdown-menu { list-style: none; padding: 10px 0; margin: 0; }
        .dropdown-menu li a { display: flex; align-items: center; gap: 12px; padding: 12px 20px; text-decoration: none; color: var(--text-light); font-size: 14px; transition: background-color 0.2s ease; }
        body.dark .dropdown-menu li a { color: var(--text-dark); }
        .dropdown-menu li a:hover { background-color: #f5f5f5; }
        body.dark .dropdown-menu li a:hover { background-color: #3e3e3e; }
        .dropdown-menu li.divider { height: 1px; margin: 8px 0; background: #e0e0e0; }
        body.dark .dropdown-menu li.divider { background: #444; }
        #emailVerifiedStatus .fa-check-circle { color: #28a745; } 
        #emailVerifiedStatus .fa-times-circle { color: #dc3545; } 
        
        .modal { display: none; }
        #goToTopBtn { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; background-color: var(--primary); color: white; border: none; border-radius: 50%; font-size: 24px; cursor: pointer; display: none; z-index: 1000; box-shadow: 0 4px 12px var(--shadow-light); transition: all 0.3s ease-in-out; display: flex; align-items: center; justify-content: center; } 
        #goToTopBtn:hover { background-color: var(--primary-dark); transform: scale(1.1); } 
        body.dark #goToTopBtn { box-shadow: 0 4px 12px var(--shadow-dark); } 
        .confetti { font-size: 48px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: pop 1s ease-out; pointer-events: none; z-index: 2000; } 
        @keyframes pop { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 60% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 0; } }

        .adsense-ad-container { margin: 25px auto; padding: 10px; text-align: center; min-height: 50px; background-color: var(--primary-light-transparent); border-radius: var(--radius); width: 90%; max-width: 970px; }
        body.dark .adsense-ad-container { background-color: rgba(44, 44, 44, 0.5); }

        /* New: Reading Progress Bar */
        #reading-progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 5px;
            background-color: var(--primary);
            z-index: 1001;
            transition: width 0.1s linear;
        }

        /* New: Dark Mode Toggle */
        #dark-mode-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: color 0.2s ease, transform 0.2s ease;
            margin-left: 10px;
        }
        #dark-mode-toggle:hover {
            color: #ffc107;
            transform: scale(1.1);
        }

        /* New: Social Share Buttons */
        .share-buttons {
            display: flex;
            flex-wrap: wrap; /* Allow wrapping on small screens */
            gap: 15px;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            justify-content: center;
        }
        body.dark .share-buttons { border-top-color: #3a3a3a; }
        .share-buttons a {
            color: #555;
            font-size: 24px;
            transition: color 0.2s ease, transform 0.2s ease;
            text-decoration: none; /* Override default link styling */
        }
        body.dark .share-buttons a { color: #ccc; }
        .share-buttons a:hover {
            transform: scale(1.1);
        }
        .share-buttons a.facebook:hover { color: #3b5998; }
        .share-buttons a.twitter:hover { color: #1da1f2; }
        .share-buttons a.linkedin:hover { color: #0077b5; }
        .share-buttons a.email:hover { color: #d44638; } /* Gmail red */
        .share-buttons a.whatsapp:hover { color: #25d366; }

        /* New: Author Box */
        .author-box {
            background: var(--primary-light-transparent);
            padding: 20px;
            border-radius: var(--radius);
            margin-top: 30px;
            display: flex; /* Use flex for layout */
            align-items: center;
            gap: 20px;
            box-shadow: 0 2px 8px var(--shadow-light);
            text-align: left; /* Ensure text alignment is left within the box */
        }
        body.dark .author-box { background: rgba(60, 60, 60, 0.5); box-shadow: 0 2px 8px var(--shadow-dark); }
        .author-box img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
            flex-shrink: 0; /* Prevent image from shrinking */
        }
        .author-info h5 {
            margin: 0 0 5px;
            color: var(--primary);
            font-size: 1.2em;
            border-bottom: none; /* Override sidebar widget h5 */
            padding-bottom: 0;
            text-align: left;
        }
        .author-info p {
            margin: 0;
            font-size: 0.95em;
            color: var(--text-light);
        }
        body.dark .author-info p { color: var(--text-dark); }
        .author-info a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s ease;
        }
        .author-info a:hover { color: var(--primary-dark); text-decoration: underline; }
        
        /* New: Related Posts */
        .related-posts-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9e9e9;
            display: none; /* Hidden until post is expanded */
        }
        body.dark .related-posts-section { border-top-color: #3a3a3a; }
        .related-posts-section h5 {
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 20px;
            text-align: left; /* Keep consistency */
        }
        .related-posts-list {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        .related-posts-list li {
            flex: 1 1 calc(33.33% - 10px); /* 3 items per row, adjust gap */
            min-width: 250px;
            background: var(--card-light);
            padding: 15px;
            border-radius: var(--radius);
            box-shadow: 0 2px 8px var(--shadow-light);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        body.dark .related-posts-list li { background: #333; box-shadow: 0 2px 8px var(--shadow-dark); }
        .related-posts-list li:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px var(--shadow-light);
        }
        body.dark .related-posts-list li:hover { box-shadow: 0 4px 12px var(--shadow-dark); }
        .related-posts-list li a {
            font-weight: 600;
            font-size: 16px;
            color: var(--text-light);
            text-decoration: none;
            display: block;
            margin-bottom: 8px;
            transition: color 0.2s ease;
        }
        body.dark .related-posts-list li a { color: var(--text-dark); }
        .related-posts-list li a:hover { color: var(--primary); }
        .related-posts-list li small {
            font-size: 13px;
            color: #888;
        }
        body.dark .related-posts-list li small { color: #aaa; }

        /* New: Table of Contents */
        .blog-toc {
            background: var(--primary-light-transparent);
            padding: 15px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: 0 2px 8px var(--shadow-light);
            position: sticky;
            top: 10px; /* Adjust sticky position */
            z-index: 5;
            max-width: 300px;
            float: right; /* Float right for desktop */
            margin-left: 20px; /* Space between content and TOC */
        }
        body.dark .blog-toc { background: rgba(60, 60, 60, 0.5); box-shadow: 0 2px 8px var(--shadow-dark); }
        .blog-toc h6 {
            margin: 0 0 10px;
            color: var(--primary);
            font-size: 1.05em;
            font-weight: 700;
        }
        .blog-toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .blog-toc ul li {
            margin-bottom: 5px;
        }
        .blog-toc ul li a {
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.95em;
            transition: color 0.2s ease;
        }
        body.dark .blog-toc ul li a { color: var(--text-dark); }
        .blog-toc ul li a:hover {
            color: var(--primary);
            text-decoration: underline;
        }
        .blog-toc ul li.h5-level { margin-left: 15px; font-size: 0.9em; }

        /* New: Helpful Feedback */
        .feedback-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9e9e9;
            text-align: center;
            display: none; /* Hidden until post is expanded */
        }
        body.dark .feedback-section { border-top-color: #3a3a3a; }
        .feedback-section p {
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .feedback-buttons button {
            background: #f0f0f0;
            color: #555;
            border: 1px solid #ccc;
            padding: 10px 20px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 0 10px;
            transition: all 0.2s ease;
        }
        body.dark .feedback-buttons button { background: #444; color: #eee; border-color: #555; }
        .feedback-buttons button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .feedback-buttons button.yes:hover { background: #28a745; color: white; border-color: #28a745; }
        .feedback-buttons button.no:hover { background: #dc3545; color: white; border-color: #dc3545; }
        .feedback-buttons button.clicked {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            cursor: default;
        }
        .feedback-buttons button.clicked.yes { background: #28a745; border-color: #28a745; }
        .feedback-buttons button.clicked.no { background: #dc3545; border-color: #dc3545; }
        
        /* --- MEDIA QUERIES --- */
        @media (max-width: 992px) {
            .blog-layout-container { flex-direction: column; }
            #blog-sidebar { 
                width: 100%; 
                margin-top: 30px; 
                position: static; /* Disable sticky on smaller screens */
                max-height: none; /* Remove height limit */
                overflow-y: visible; /* Remove overflow */
            }
            /* Hide clock and weather on smaller screens */
            #live-clock, #live-weather { 
                display: none; 
            }
            .blog-toc {
                float: none;
                margin: 0 auto 20px;
                max-width: 100%;
                width: 100%;
            }
            .related-posts-list li {
                flex: 1 1 calc(50% - 10px); /* 2 items per row */
            }
        }
        @media (max-width: 768px) { 
            h2, h3 { font-size: 22px; }
            #blog-main-heading { font-size: 24px; }
            .blog-post h4 { font-size: 20px; }
            .sidenav a { font-size: 18px; }
            .related-posts-list li {
                flex: 1 1 100%; /* 1 item per row on very small screens */
            }
        }
        @media (max-width: 480px) {
            .profile-container { 
                position: fixed; 
                top: 10px; 
                right: 10px; 
            }
            .open-nav-btn {
                /* On smallest screens, absolutely position the toggle */
                position: absolute;
                left: 5%;
                top: 50%;
                transform: translateY(-50%);
            }
             #blogs-section { padding: 30px 5%; }
             .blog-post { padding-bottom: 20px; margin-bottom: 20px; }
             .header-content h1 { font-size: 1.5em; }
             .header-content p { font-size: 0.8em; }
             .author-box { flex-direction: column; text-align: center; }
             .author-box img { margin-bottom: 10px; }
        }
    </style>
</head>
<body>

<div id="reading-progress-bar"></div> <!-- NEW: Reading Progress Bar -->

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
  <a href="index.html" onclick="closeNavAndGoTo('index.html')">Home</a>
  <a href="index.html#overview" onclick="closeNavAndGoTo('index.html#overview')">Overview</a>
  <a href="about.html" onclick="closeNavAndGoTo('about.html')">About</a>
  <a href="blogs.html" onclick="closeNavAndGoTo('blogs.html')">Blog</a>
  <a href="index.html#faq-section" onclick="closeNavAndGoTo('index.html#faq-section')">FAQ</a>
  <a href="privacy-policy.html" onclick="closeNavAndGoTo('privacy-policy.html')">Privacy Policy</a>
  <a href="terms-of-service.html" onclick="closeNavAndGoTo('terms-of-service.html')">Terms of Service</a>
  <a href="disclaimer.html" onclick="closeNavAndGoTo('disclaimer.html')">Disclaimer</a>
  <a href="contact.html">Contact</a>
</div>

<!-- START: MODIFIED HEADER HTML STRUCTURE -->
<header>
    <div class="header-left">
        <span class="open-nav-btn" onclick="openNav()">☰</span>
        <span id="live-clock"></span>
    </div>

    <div class="header-content">
        <h1>
            <a href="index.html" style="text-decoration: none; color: inherit;">
                📝 NOTE_<span style="color:#ffc107">P@D</span>
            </a>
        </h1>
        <p style="margin-top: 5px; font-weight: 300; opacity: 0.9;">Notepad, Whiteboard, and To-Do List</p>
    </div>

    <div class="header-right">
        <span id="live-weather"><i class="fas fa-spinner fa-spin"></i> Loading...</span>
        <button id="dark-mode-toggle" aria-label="Toggle dark mode">
            <i class="fas fa-moon"></i>
        </button>
        <div id="profile-container" class="profile-container hidden">
            <img id="profile-icon" src="https://ui-avatars.com/api/?name=U" alt="Profile" tabindex="0" width="42" height="42">
            <div id="profile-dropdown" class="profile-dropdown hidden">
                <div class="dropdown-header">
                    <img id="userPic" src="https://ui-avatars.com/api/?name=U&background=random&color=fff" alt="Profile" width="48" height="48"> 
                    <div>
                        <span id="userNameDisplay">User Name</span>
                        <small id="userEmailDisplay" style="color: #888; display: block; font-weight: 400;"></small>
                    </div>
                </div>
                <ul class="dropdown-menu">
                    <li><a href="#" id="editProfilePhotoBtn"><i class="fas fa-camera fa-fw"></i> Edit Profile Photo</a></li>
                    <li><a href="#" id="verifyEmailBtn"><i class="fas fa-envelope fa-fw"></i> Verify Email <span id="emailVerifiedStatus"></span></a></li>
                    <li><a href="#" id="resetPasswordBtn"><i class="fas fa-key fa-fw"></i> Reset Password</a></li>
                    <li class="divider"></li>
                    <li><a href="#" id="manageAccountBtn"><i class="fas fa-user-cog fa-fw"></i> Manage Account</a></li> 
                    <li class="divider"></li>
                    <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt fa-fw"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
</header>
<!-- END: MODIFIED HEADER HTML STRUCTURE -->

<input type="file" id="photoUpload" class="hidden" accept="image/*">

<main id="main-container" class="container">
    <div id="blogs-section"> 
        <h2 id="blog-main-heading"><i class="fas fa-blog" style="color: var(--primary); margin-right: 12px;"></i>Productivity Insights & Blog</h2>
        
        <div class="blog-layout-container">
            <div id="blog-posts-container">
                <div id="blog-list">
                    <!-- Blog posts will be dynamically inserted here by JavaScript -->
                </div>
            </div>
            <aside id="blog-sidebar">
                <!-- Search Widget -->
                <div class="sidebar-widget">
                    <h5>Search</h5>
                    <input type="text" id="blog-search-input" placeholder="Search posts...">
                </div>
                <!-- Recent Posts Widget -->
                <div class="sidebar-widget">
                    <h5>Recent Posts</h5>
                    <ul id="sidebar-recent-posts">
                        <!-- JS will populate this -->
                    </ul>
                </div>
                <!-- Tags Widget -->
                <div class="sidebar-widget">
                    <h5>Tags</h5>
                    <div id="sidebar-tags-cloud">
                        <!-- JS will populate this -->
                    </div>
                </div>
                <!-- Newsletter Widget -->
                <div class="sidebar-widget">
                    <h5>Newsletter</h5>
                    <input type="email" id="sidebar-newsletter-email" placeholder="Enter your e-mail">
                    <button id="sidebar-newsletter-btn">Subscribe</button>
                </div>
                <!-- Follow Us Widget -->
                <div class="sidebar-widget">
                    <h5>Follow Us</h5>
                    <div class="social-links">
                        <a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" target="_blank" rel="noopener noreferrer" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.linkedin.com/in/bishal-mishra-076a06287/" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://github.com/BishalMishraGit" target="_blank" rel="noopener noreferrer" title="GitHub"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                <!-- App Download Widget -->
                <div class="sidebar-widget">
                    <h5>Get Our App</h5>
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://bishalmishra.com/index.html" alt="QR code for app" class="qr-code-img">
                    <p style="font-size: 14px; text-align: center; margin-top: 10px;">Scan to install Note P@d.</p>
                    <div class="app-download-links">
                        <a href="#" class="app-download-btn"><i class="fab fa-google-play"></i> Google Play</a>
                        <a href="#" class="app-download-btn"><i class="fab fa-app-store-ios"></i> App Store</a>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    <!-- AdSense Ad Unit Start -->
    <div class="adsense-ad-container">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-3010913100191778"
             data-ad-slot="1810825365"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <!-- AdSense Ad Unit End -->
</main>

<!-- Auth Modal (needed for login/logout functionality) -->
<div id="authModal" class="modal hidden"> <div class="modal-content"> <h2 id="authTitle">Sign In to Note P@d</h2> <input type="text" id="authUsername" placeholder="Username (Email)" autocomplete="username"/> <input type="password" id="authPassword" placeholder="Password" autocomplete="current-password"/> <button id="authSubmit">Sign In</button> <div id="googleSignInDiv" style="margin: 20px auto 0; display: flex; justify-content: center;"></div> <a href="#" id="forgotPassword">Forgot Password?</a> <p id="switchMode">Don't have an account? <a href="#">Sign Up</a></p> </div> </div>
<button id="goToTopBtn" title="Go to top" aria-label="Go to top">↑</button>
<div id="confetti" class="confetti hidden">🎉</div>
<audio id="loginSound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>

<footer>
   <p>Copyright © <span id="currentYear"></span> <a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Bishal Mishra</a> | All Rights Reserved.</p>
   <div>
        <a href="privacy-policy.html">Privacy Policy</a> |
        <a href="terms-of-service.html">Terms of Service</a> |
        <a href="disclaimer.html">Disclaimer</a> |
        <a href="contact.html">Contact Us</a>
   </div>
</footer>


<script>
// --- GLOBAL VARIABLES (minimal set for this page) ---
let isSignUp = false;

const goToTopBtn = document.getElementById('goToTopBtn');
const authModal = document.getElementById('authModal');
const profileContainer = document.getElementById('profile-container');
const profileIcon = document.getElementById('profile-icon');
const profileDropdown = document.getElementById('profile-dropdown');
const logoutBtn = document.getElementById('logoutBtn');
const blogList = document.getElementById('blog-list'); 

// --- SIDENAV & SCROLL FUNCTIONS ---
function openNav() { document.getElementById("mySidenav").style.width = "280px"; }
function closeNav() { document.getElementById("mySidenav").style.width = "0"; }
function closeNavAndGoTo(url) { closeNav(); setTimeout(() => window.location.href = url, 300); }

document.addEventListener("DOMContentLoaded", () => {
    loadDarkMode();
    updateClock(); 
    setInterval(updateClock, 1000); 
    fetchWeather();
    checkAuthStatus(); 
    attachEventListeners();
    loadBlogPosts(); // Loads initial blog posts on page load
    populateBlogSidebar();
    document.getElementById('currentYear').textContent = new Date().getFullYear();
    updateReadingProgressBar(); // Initial call for progress bar
});

window.onload = function() { 
    if (typeof google !== 'undefined' && google.accounts && google.accounts.id) { 
        initGoogleSignIn(); 
    } else { 
        let attempts = 0; 
        const intervalId = setInterval(() => { 
            attempts++; 
            if (typeof google !== 'undefined' && google.accounts && google.accounts.id) { 
                initGoogleSignIn(); 
                clearInterval(intervalId); 
            } else if (attempts > 20) { 
                console.error("Google Sign-In did not initialize in time."); 
                if(document.getElementById('googleSignInDiv')) { 
                    document.getElementById('googleSignInDiv').innerHTML = "Google Sign-In failed to load. Please try refreshing."; 
                } 
                clearInterval(intervalId); 
            } 
        }, 500); 
    } 
};

function attachEventListeners() {
    window.onscroll = () => { 
        if (goToTopBtn) goToTopBtn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "flex" : "none"; 
        updateReadingProgressBar(); // NEW: Update progress bar on scroll
    };
    if (goToTopBtn) goToTopBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
    if (profileIcon) profileIcon.addEventListener('click', toggleProfileDropdown);
    document.addEventListener('click', closeDropdownOnClickOutside);
    if (logoutBtn) logoutBtn.addEventListener('click', handleLogout);
    const verifyEmailBtn = document.getElementById('verifyEmailBtn');
    if (verifyEmailBtn) verifyEmailBtn.addEventListener('click', handleVerifyEmail);
    const resetPasswordBtn = document.getElementById('resetPasswordBtn');
    if (resetPasswordBtn) resetPasswordBtn.addEventListener('click', handleResetPassword);
    const manageAccountBtn = document.getElementById('manageAccountBtn'); 
    if (manageAccountBtn) manageAccountBtn.addEventListener('click', handleManageAccount); 
    const editProfilePhotoBtn = document.getElementById('editProfilePhotoBtn');
    if (editProfilePhotoBtn) editProfilePhotoBtn.addEventListener('click', (e) => { e.preventDefault(); const photoUploadInput = document.getElementById('photoUpload'); if(photoUploadInput) photoUploadInput.click(); });
    const photoUploadInput = document.getElementById('photoUpload');
    if (photoUploadInput) photoUploadInput.addEventListener('change', handlePhotoUpload);
    const searchInput = document.getElementById('blog-search-input');
    if (searchInput) { searchInput.addEventListener('keyup', () => filterBlogPosts(searchInput.value)); }
    const newsletterBtn = document.getElementById('sidebar-newsletter-btn');
    if (newsletterBtn) { newsletterBtn.addEventListener('click', () => { const emailInput = document.getElementById('sidebar-newsletter-email'); const email = emailInput.value.trim(); const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; if (email && emailRegex.test(email)) { alert(`Thank you for subscribing, ${email}! You'll receive our latest posts.`); emailInput.value = ''; } else { alert('Please enter a valid email address.'); } }); }
    
    // NEW: Dark Mode Toggle
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    if (darkModeToggle) {
        darkModeToggle.addEventListener('click', toggleDarkMode);
    }

    // Event listener for dynamic weather refresh button
    document.body.addEventListener('click', (event) => {
        if (event.target && event.target.id === 'weather-refresh-btn') {
            const icon = event.target;
            icon.classList.add('fa-spin'); // Add spin animation for visual feedback
            fetchWeather();
        }
    });
}

function toggleProfileDropdown() { if(profileDropdown) profileDropdown.classList.toggle('hidden'); }
function closeDropdownOnClickOutside(event) { if (profileContainer && !profileContainer.contains(event.target) && profileDropdown && !profileDropdown.classList.contains('hidden')) profileDropdown.classList.add('hidden'); }
function checkAuthStatus() { const currentUserId = localStorage.getItem('currentUserId'); if (currentUserId) { showUserInfo(); } else { if(profileContainer) profileContainer.classList.add('hidden'); } }
function showUserInfo() { const username = localStorage.getItem('currentUser'); const picUrl = localStorage.getItem('userPic'); const email = localStorage.getItem('userEmail'); const isVerified = localStorage.getItem('emailVerified') === 'true'; const profileIcon = document.getElementById('profile-icon'); const userPic = document.getElementById('userPic'); const userNameDisplay = document.getElementById('userNameDisplay'); const userEmailDisplay = document.getElementById('userEmailDisplay'); const emailVerifiedStatus = document.getElementById('emailVerifiedStatus'); const verifyEmailBtn = document.getElementById('verifyEmailBtn'); const resetPasswordBtn = document.getElementById('resetPasswordBtn'); if (!username || !profileContainer) return; profileContainer.classList.remove('hidden'); const avatarUrl = picUrl || `https://ui-avatars.com/api/?name=${encodeURIComponent(username.substring(0,2))}&background=random&color=fff&size=48`; if(profileIcon) profileIcon.src = avatarUrl; if(userPic) userPic.src = avatarUrl; if(userNameDisplay) userNameDisplay.textContent = username; if(userEmailDisplay) userEmailDisplay.textContent = email || ''; if (emailVerifiedStatus) { if (isVerified) { emailVerifiedStatus.innerHTML = '<i class="fas fa-check-circle" title="Email is verified"></i>'; if(verifyEmailBtn) { verifyEmailBtn.style.opacity = '0.6'; verifyEmailBtn.style.cursor = 'default'; } } else { emailVerifiedStatus.innerHTML = '<i class="fas fa-times-circle" title="Email not verified"></i>'; if(verifyEmailBtn) { verifyEmailBtn.style.opacity = '1'; verifyEmailBtn.style.cursor = 'pointer'; } } } if(verifyEmailBtn && verifyEmailBtn.parentElement) verifyEmailBtn.parentElement.style.display = 'block'; const provider = localStorage.getItem('authProvider'); if (resetPasswordBtn && resetPasswordBtn.parentElement) { if (provider === 'google') { resetPasswordBtn.parentElement.style.display = 'none'; if (isVerified && verifyEmailBtn && verifyEmailBtn.parentElement) { verifyEmailBtn.parentElement.style.display = 'none'; } } else { resetPasswordBtn.parentElement.style.display = 'block'; } } }
function handleLogout(e) { if(e) e.preventDefault(); localStorage.removeItem("currentUser"); localStorage.removeItem("userPic"); localStorage.removeItem("currentUserId"); localStorage.removeItem("emailVerified"); localStorage.removeItem("userEmail"); localStorage.removeItem("authProvider"); if (typeof google !== 'undefined' && google.accounts && google.accounts.id) google.accounts.id.disableAutoSelect(); if(profileContainer) profileContainer.classList.add('hidden'); if(profileDropdown && !profileDropdown.classList.contains('hidden')) profileDropdown.classList.add('hidden'); if(authModal) authModal.classList.remove("hidden"); }
function handlePhotoUpload(event) { const file = event.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (e) => { localStorage.setItem('userPic', e.target.result); showUserInfo(); alert("Profile photo updated!"); }; reader.readAsDataURL(file); }
function handleVerifyEmail(e) { e.preventDefault(); if (localStorage.getItem('emailVerified') === 'true') { alert('Your email is already verified.'); return; } if (localStorage.getItem('authProvider') === 'google') { alert('Google accounts are typically pre-verified or managed via Google.'); return; } const verificationCode = Math.floor(100000 + Math.random() * 900000).toString(); alert(`A verification code has been "sent" to your email (for demo purposes, it's shown here).\n\nYour code is: ${verificationCode}\n\nPlease enter this code in the prompt.`); const userCode = prompt("Please enter the 6-digit verification code:"); if (userCode === verificationCode) { localStorage.setItem('emailVerified', 'true'); alert("Email verified successfully!"); showUserInfo(); }  else if (userCode) { alert("Incorrect code. Please try again."); }  else { alert("Verification cancelled."); } }
function handleResetPassword(e) { e.preventDefault(); if (localStorage.getItem('authProvider') === 'google') { alert("Password reset is managed through your Google account."); return; } if (!localStorage.getItem('currentUser')) { alert("Please sign in to reset your password."); return; } const newPassword = prompt("Enter your new password (min 4 characters):"); if (!newPassword || newPassword.length < 4) { if (newPassword !== null) alert("Password is too short."); return; } const confirmPassword = prompt("Confirm your new password:"); if (newPassword !== confirmPassword) { alert("Passwords do not match."); return; } const username = localStorage.getItem('userEmail'); if(!username) { alert("User email not found. Cannot reset password."); return;} const users = JSON.parse(localStorage.getItem("users") || "{}"); if (users[username]) { users[username] = newPassword; localStorage.setItem("users", JSON.stringify(users)); alert("Your password has been reset successfully!"); }  else { alert("An error occurred. Could not find user to update password."); } }
function handleManageAccount(e) { e.preventDefault(); alert("You can manage your profile photo and email verification from the dropdown. For other account settings, please contact support if needed."); }
function loginSuccess(username, picUrl, userId) { localStorage.setItem("currentUserId", userId); if(picUrl) localStorage.setItem("userPic", picUrl); showUserInfo(); if(authModal) authModal.classList.add("hidden"); const confetti = document.getElementById('confetti'); const loginSound = document.getElementById('loginSound'); if(confetti) loginSound?.play().catch(e => console.warn("Audio play failed:", e)); setTimeout(() => { if(confetti) confetti.classList.add("hidden"); }, 1200); }
function initGoogleSignIn() { try { if (!google || !google.accounts || !google.accounts.id) { console.error("Google Sign-In library not fully loaded."); if(document.getElementById('googleSignInDiv')) document.getElementById('googleSignInDiv').innerHTML = "Google Sign-In failed to load."; return; } google.accounts.id.initialize({ client_id: "107788525119-7mkm9t2pqe53q85ltenn4lr3av7itdfh.apps.googleusercontent.com", callback: handleGoogleSignIn }); const googleSignInButtonContainer = document.getElementById("googleSignInDiv"); if (googleSignInButtonContainer) google.accounts.id.renderButton(googleSignInButtonContainer, { theme: "outline", size: "large", shape: "pill", width: "300" }); else console.warn("Google Sign-In button container not found."); } catch (error) { console.error("Google GSI could not be initialized.", error); const googleSignInButtonContainer = document.getElementById('googleSignInDiv'); if (googleSignInButtonContainer) googleSignInButtonContainer.innerHTML = "Google Sign-In failed to load."; } }
function jwtDecode(token) { try { return JSON.parse(atob(token.split('.')[1])); } catch (e) { console.error("Failed to decode JWT", e); return null; } }
function handleGoogleSignIn(response) { const data = jwtDecode(response.credential); if (!data) { alert("Failed to process Google Sign-In. Please try again."); return;} const name = data.name || data.email; const picture = data.picture || ""; const userId = data.sub; const email = data.email; const emailVerified = data.email_verified === true || data.email_verified === 'true'; localStorage.setItem("currentUser", name); localStorage.setItem('authProvider', 'google'); localStorage.setItem('userEmail', email); localStorage.setItem('emailVerified', emailVerified.toString()); loginSuccess(name, picture, userId); }

// NEW: Dark Mode Toggle
function toggleDarkMode() {
    document.body.classList.toggle('dark');
    const isDarkMode = document.body.classList.contains('dark');
    localStorage.setItem('darkMode', isDarkMode);
    const toggleIcon = document.getElementById('dark-mode-toggle')?.querySelector('i');
    if (toggleIcon) {
        if (isDarkMode) {
            toggleIcon.classList.remove('fa-moon');
            toggleIcon.classList.add('fa-sun');
        } else {
            toggleIcon.classList.remove('fa-sun');
            toggleIcon.classList.add('fa-moon');
        }
    }
}
function loadDarkMode() { 
    const isDarkMode = localStorage.getItem('darkMode') === 'true';
    if (isDarkMode) {
        document.body.classList.add('dark');
    }
    const toggleIcon = document.getElementById('dark-mode-toggle')?.querySelector('i');
    if (toggleIcon) {
        if (isDarkMode) {
            toggleIcon.classList.remove('fa-moon');
            toggleIcon.classList.add('fa-sun');
        } else {
            toggleIcon.classList.remove('fa-sun');
            toggleIcon.classList.add('fa-moon');
        }
    }
}


// --- Live Clock and Weather Functions ---
function updateClock() {
    const clockElement = document.getElementById('live-clock');
    if (!clockElement) return;

    const now = new Date();
    let hours = now.getHours();
    const minutes = now.getMinutes().toString().padStart(2, '0');
    const seconds = now.getSeconds().toString().padStart(2, '0');
    const ampm = hours >= 12 ? 'PM' : 'AM';

    hours = hours % 12;
    hours = hours ? hours : 12; 

    clockElement.textContent = `${hours}:${minutes}:${seconds} ${ampm}`;
}

function getWeatherIconClass(weatherId) {
    if (weatherId >= 200 && weatherId < 300) return 'fas fa-bolt'; // Thunderstorm
    if (weatherId >= 300 && weatherId < 400) return 'fas fa-cloud-rain'; // Drizzle
    if (weatherId >= 500 && weatherId < 600) return 'fas fa-cloud-showers-heavy'; // Rain
    if (weatherId >= 600 && weatherId < 700) return 'fas fa-snowflake'; // Snow
    if (weatherId >= 700 && weatherId < 800) return 'fas fa-smog'; // Atmosphere
    if (weatherId === 800) return 'fas fa-sun'; // Clear
    if (weatherId === 801) return 'fas fa-cloud-sun'; // Few clouds
    if (weatherId > 801 && weatherId < 805) return 'fas fa-cloud'; // Clouds
    return 'fas fa-question-circle'; // Default
}

function fetchWeatherData(lat, lon) {
    const weatherElement = document.getElementById('live-weather');
    const apiKey = '6c6f3b5d9306e38909bea9a6b45a3e74';
    const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

    fetch(apiUrl)
        .then(response => {
            if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
            return response.json();
        })
        .then(data => {
            if (!data.main || !data.weather || !data.weather[0] || !data.name) {
                throw new Error('Invalid data from Weather API');
            }
            const temp = Math.round(data.main.temp);
            const weatherId = data.weather[0].id;
            const iconClass = getWeatherIconClass(weatherId);
            const cityName = data.name;
            
            weatherElement.innerHTML = `
                <i class="${iconClass}"></i> ${cityName}: ${temp}°C
                <i id="weather-refresh-btn" class="fas fa-sync-alt" title="Refresh weather"></i>`;
        })
        .catch(error => {
            console.error('Error fetching weather data:', error);
            weatherElement.innerHTML = `
                <i class="fas fa-times-circle"></i> Weather unavailable
                <i id="weather-refresh-btn" class="fas fa-sync-alt" title="Retry"></i>`;
        });
}

function fetchWeather() {
    const weatherElement = document.getElementById('live-weather');
    if (!weatherElement) return;

    if (!document.getElementById('weather-refresh-btn')?.classList.contains('fa-spin')) {
        weatherElement.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Fetching weather...`;
    }

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (position) => {
                fetchWeatherData(position.coords.latitude, position.coords.longitude);
            },
            () => {
                console.warn("Geolocation failed or was denied. Falling back to default location.");
                fetchWeatherData(27.7172, 85.3240); // Fallback to Kathmandu
            },
            { timeout: 10000 }
        );
    } else {
        console.warn("Geolocation is not supported. Falling back to default location.");
        fetchWeatherData(27.7172, 85.3240); // Fallback to Kathmandu
    }
}
// --- BLOG DATA AND FUNCTIONS (specific to this page) ---
const blogPostsData = [
    {
        id: 12, 
        title: "How To Create Payoneer Account In Nepal and Get Mastercard?", 
        date: "2024-07-29", 
        views: 4200, 
        author: "Bishal Mishra", 
        author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */
        author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.",
        image: "https://techprasar.com/wp-content/uploads/2023/08/How-To-Create-Payoneer-Account-In-Nepal-and-Get-Mastercard_.jpg", 
        content: "A step-by-step guide for freelancers and professionals in Nepal to create a Payoneer account. Learn how to sign up, link your local bank, and meet the requirements to order your own Payoneer Mastercard for global payments...", 
        fullContent: `<h4>What You'll Need Before You Start:</h4>
                      <ul>
                          <li>A valid government-issued ID (Citizenship, Passport, or National ID Card).</li>
                          <li>Your full address in Nepal (for verification and card delivery).</li>
                          <li>Details of your local Nepali bank account (e.g., Prabhu Bank, Nabil Bank, etc.).</li>
                          <li>An active email address and phone number.</li>
                      </ul>
                      <h4>Step-by-Step: Creating Your Payoneer Account</h4>
                      <p>Follow these instructions carefully to ensure a smooth setup process.</p>
                      <ol>
                          <li><strong>Visit the Official Payoneer Website:</strong> Go to the <a href="https://www.payoneer.com/" target="_blank" rel="noopener noreferrer">Payoneer sign-up page</a>. Clicking through an official link ensures you are on the legitimate site.</li>
                          <li><strong>Start the Registration:</strong> Click on "Register" and select the option that best describes you (e.g., 'Freelancer or SMB'). Follow the prompts to specify that you want to 'Get paid by international clients or marketplaces'.</li>
                          <li><strong>Fill in Your Details:</strong> The application is divided into four parts:
                              <ul>
                                  <li><strong>Getting Started:</strong> Enter your name, email address, and date of birth exactly as they appear on your government ID.</li>
                                  <li><strong>Contact Details:</strong> Provide your full address in Nepal and a valid phone number for verification.</li>
                                  <li><strong>Security Details:</strong> Set a strong password and security questions. Keep this information safe.</li>
                                  <li><strong>Almost Done:</strong> Enter your citizenship details and your local Nepali bank account information. This is where Payoneer will send your funds when you withdraw. Double-check your bank name, account number, and SWIFT code.</li>
                              </ul>
                          </li>
                          <li><strong>Submit and Wait for Review:</strong> Once you've submitted your application, Payoneer will review it. This can take a few business days. You'll receive an email confirmation once your account is approved.</li>
                      </ol>
                      <h4>How to Get the Payoneer Mastercard in Nepal</h4>
                      <p>The Payoneer Mastercard is a physical debit card linked to your USD, EUR, or GBP balance, allowing you to withdraw cash from ATMs and make purchases online or in stores worldwide.</p>
                      <p><strong>Eligibility Requirement:</strong> To be eligible to order the card, you must first receive a minimum of <strong>$100 (or the equivalent in another currency)</strong> in payments from clients or marketplaces into your Payoneer account. This does not include payments from other Payoneer users via the "Make a Payment" service.</p>
                      <p><strong>Ordering the Card:</strong></p>
                      <ol>
                          <li>Once you meet the eligibility requirement, a 'Sign Up' button for the Payoneer Card will appear in your online account dashboard.</li>
                          <li>Click the button and follow the instructions to order your card. Confirm your shipping address carefully.</li>
                          <li>The card is shipped via standard mail and can take several weeks to arrive in Nepal. Once it arrives, you'll need to activate it through your Payoneer dashboard.</li>
                      </ol>
                      <h4>Useful Links and Resources:</h4>
                      <ul>
                          <li><a href="https://payoneer.custhelp.com/app/home" target="_blank" rel="noopener noreferrer">Payoneer Support Center</a></li>
                          <li><a href="https://www.payoneer.com/fees/" target="_blank" rel="noopener noreferrer">Payoneer Fees Explained</a></li>
                          <li><a href="https://www.nrb.org.np/" target="_blank" rel="noopener noreferrer">Nepal Rastra Bank (for forex regulations)</a></li>
                      </ul>
                      <p>Congratulations! You are now equipped to handle international payments like a pro from Nepal.</p>`, 
        tags: ["Payoneer", "Mastercard", "Nepal", "freelancing", "online payment", "get paid"] 
    },
    { 
        id: 9, 
        title: "Download 1000+ Nepali Fonts for Free: Preeti, Sagarmatha, and More!", 
        date: "2024-07-27", 
        views: 2530, 
        author: "Bishal Mishra", 
        author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */
        author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.",
        image: "https://i0.wp.com/www.nepalitrends.com/wp-content/uploads/2019/03/best-nepali-fonts.jpg?fit=1000%2C600&ssl=1", 
        content: "Enhance your documents, designs, and digital content with our curated collection of over 1000+ free Nepali fonts. From the classic Preeti to modern Unicode fonts like Sagarmatha, find the perfect typeface for your needs...", 
        fullContent: `<p>Whether you're drafting an official document, creating stunning graphics, or simply typing in Nepali, having the right font is crucial. We've gathered a massive collection of over 1000 Nepali fonts, including timeless classics and modern Unicode typefaces, all available in a single, free download.</p>
                      <p>This pack includes everything you need for both professional and personal projects. You'll find popular fonts essential for government paperwork, creative fonts for design projects, and standard Unicode fonts for web and digital use.</p>
                      <a href="https://comtutorera.com/wp-content/uploads/2022/06/All-Nepali-fonts.7z" target="_blank" rel="noopener noreferrer" class="download-btn"><i class="fas fa-download" style="margin-right: 8px;"></i>Download 1000+ Nepali Fonts Now</a>
                      <h4>How to Install Nepali Fonts</h4>
                      <p>Installing the fonts is simple. Once you've downloaded and unzipped the file, follow these steps:</p>
                      <ul>
                        <li><strong>For Windows 10/11:</strong> Right-click on the font files you want to install and select 'Install' or 'Install for all users'. Alternatively, you can drag and drop the font files into the <strong>Control Panel > Appearance and Personalization > Fonts</strong> folder.</li>
                        <li><strong>For macOS:</strong> Double-click the font file and click the "Install Font" button in the Font Book application. You can also drag the font files to the Font Book app icon in your dock.</li>
                      </ul>
                      <h4>Popular Fonts Included in the Pack:</h4>
                      <ul>
                        <li>Preeti</li>
                        <li>Kantipur</li>
                        <li>Sagarmatha</li>
                        <li>Ganesh</li>
                        <li>Himali</li>
                        <li>And hundreds more...</li>
                      </ul>
                      <p>Stop searching for individual fonts and get everything you need in one place. Download the pack today and elevate your Nepali typing experience!</p>`, 
        tags: ["Nepali fonts", "free download", "Preeti font", "Devanagari", "typing", "Nepal"] 
    },
    { 
        id: 1, 
        title: "How To Download Typeshala For Windows 7/8/10 [64-bit]?", 
        date: "2024-07-25", 
        views: 3500, 
        author: "Bishal Mishra", 
        author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */
        author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.",
        image: "https://techprasar.com/wp-content/uploads/2022/11/How-To-Download-Typeshala-For-Windows-jpg.jpg", 
        content: "Looking to improve your Nepali typing speed and accuracy? Typeshala is the classic, go-to software for learners. This guide shows you how to download and install it on your Windows PC...", 
        fullContent: `<p>Typeshala is a legendary Nepali typing tutor software that has helped countless users master Nepali keyboard layouts, including both traditional and Romanized formats. It's a lightweight, effective tool that's perfect for students, government employees, and anyone looking to become proficient in Nepali typing. This guide provides a direct download link and a step-by-step installation walkthrough.</p>
                      <a href="https://mega.nz/file/zQdkVZqT#96R-PWFJ9pEi8yqCstsBt8d5dRN5BiYawrnaD_gXv-8" target="_blank" rel="noopener noreferrer" class="download-btn"><i class="fas fa-download" style="margin-right: 8px;"></i>Download Typeshala Now</a>
                      <h4>How to Install Typeshala on Windows</h4>
                      <p>After downloading the file, follow these simple steps to get Typeshala running on your computer.</p>
                      <ol>
                          <li><strong>Open the downloaded setup file.</strong> You will see the initial setup screen. Click 'Next' to begin.
                              <img src="https://techprasar.com/wp-content/uploads/2022/11/Screenshot_1-1024x445.png" alt="Typeshala Setup Step 1" class="step-image">
                          </li>
                          <li><strong>Accept the license agreement.</strong> Read through the agreement, select 'I accept the agreement', and click 'Next'.
                              <img src="https://techprasar.com/wp-content/uploads/2022/11/Screenshot_2.png" alt="Typeshala Setup Step 2" class="step-image">
                          </li>
                          <li><strong>Choose the installation location.</strong> You can keep the default folder or choose a different one. Click 'Next' to continue.
                              <img src="https://techprasar.com/wp-content/uploads/2022/11/Screenshot_4-1024x497.png" alt="Typeshala Setup Step 3" class="step-image">
                          </li>
                           <li><strong>Ready to Install.</strong> The setup wizard now has all the information it needs. Click 'Install' to proceed.
                              <img src="https://techprasar.com/wp-content/uploads/2022/11/Screenshot_3-1024x452.png" alt="Typeshala Setup Step 4" class="step-image">
                          </li>
                          <li><strong>Completing the Setup.</strong> Once the installation is finished, you will see this confirmation window. Click 'Finish'.
                              <img src="https://techprasar.com/wp-content/uploads/2022/11/Group-590-1024x339.png" alt="Typeshala Setup Step 5" class="step-image">
                          </li>
                          <li><strong>Launch Typeshala.</strong> You can now open Typeshala from your desktop or Start Menu. Select a lesson and start practicing your Nepali typing!
                              <img src="https://techprasar.com/wp-content/uploads/2022/11/Screenshot_8-1024x583.png" alt="Typeshala Main Screen" class="step-image">
                          </li>
                      </ol>
                      <p>Happy typing!</p>`, 
        tags: ["Typeshala", "Nepali typing", "free download", "Windows", "typing tutor"] 
    },
    { 
        id: 8, 
        title: "3uTools | The best all-in-one tool for iOS users", 
        date: "2024-07-24", 
        views: 3150, 
        author: "Bishal Mishra", 
        author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */
        author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.",
        image: "https://3utools.id/wp-content/uploads/2025/03/3utools-for-windows.webp", 
        content: "Discover 3uTools, the ultimate all-in-one solution for managing your iOS devices. This comprehensive guide covers its powerful features and provides direct download links for both Windows and macOS...", 
        fullContent: `
            <p>3uTools is a powerful and completely free all-in-one tool for iOS users, allowing you to manage your iPhone, iPad, and iPod Touch data with ease. It's more than just a file manager; it's a comprehensive suite that offers features like flashing, jailbreaking, data backup and restore, and much more, all from your Windows PC or macOS.</p>
            <h4>Key Features of 3uTools:</h4>
            <ul>
              <li><strong>Data Management:</strong> Easily manage your photos, music, videos, contacts, and apps.</li>
              <li><strong>Flashing & Jailbreaking:</strong> 3uTools simplifies the process of flashing iOS firmware and offers one-click jailbreak solutions for many devices.</li>
              <li><strong>Real-time Screen:</strong> Mirror your iOS device's screen to your computer.</li>
              <li><strong>Backup & Restore:</strong> Create full backups of your device and restore them whenever needed.</li>
              <li><strong>Handy Toolbox:</strong> Includes a collection of useful utilities like a ringtone maker, video converter, and icon manager.</li>
            </ul>
            <h4>Download 3uTools for Free</h4>
            <p>Get the latest version of 3uTools directly. Choose the correct version for your operating system below. These download links are from the official source to ensure safety and reliability.</p>
            <div class="download-options-container">
                <div class="download-option">
                    <h5><i class="fab fa-windows"></i> Download for Windows</h5>
                    <a href="https://3utools.org/files/downloads/3uTools_Setup_x64.exe" target="_blank" rel="noopener noreferrer" class="download-btn-specific">Download for Windows (64-bit)</a>
                    <a href="https://3utools.org/files/downloads/3uTools_Setup_x86.exe" target="_blank" rel="noopener noreferrer" class="download-btn-specific">Download for Windows (32-bit)</a>
                </div>
                <div class="download-option">
                    <h5><i class="fab fa-apple"></i> Download for macOS</h5>
                    <a href="https://3utools.org/files/downloads/3uTools_dmg" target="_blank" rel="noopener noreferrer" class="download-btn-specific">Download for macOS</a>
                </div>
            </div>
            <h4>Alternative Download Links</h4>
            <p>If the official links are slow, you can also download 3uTools from these trusted third-party websites:</p>
            <ul>
              <li><a href="https://3utools.en.softonic.com/" target="_blank" rel="noopener noreferrer">Softonic</a></li>
              <li><a href="https://www.filehorse.com/download-3utools/" target="_blank" rel="noopener noreferrer">FileHorse</a></li>
              <li><a href="https://www.techspot.com/downloads/7311-3utools.html" target="_blank" rel="noopener noreferrer">TechSpot</a></li>
            </ul>
            <h4>How to Install 3uTools</h4>
            <p>Once downloaded, simply double-click the setup file and follow the on-screen instructions. The installation process is straightforward. After installation, connect your iOS device to your computer via a USB cable, and 3uTools will automatically detect it.</p>
        `, 
        tags: ["3uTools", "iOS management", "iPhone", "iPad", "free download", "Windows", "macOS"] 
    },
    { 
        id: 4, 
        title: "How to Register IMEI Number in MDMS System in Nepal?", 
        date: "2024-07-28", 
        views: 4500, 
        author: "Bishal Mishra", 
        author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */
        author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.",
        image: "https://onlinekhabar.com/wp-content/uploads/2023/07/MDMS-NTA.jpg", 
        content: "Understanding Nepal's MDMS system is crucial for smartphone users. This guide provides a detailed walkthrough on how to register your IMEI number to ensure your device functions legally...", 
        fullContent: `
            <p>The Mobile Device Management System (MDMS) was implemented by the Nepal Telecommunications Authority (NTA) to regulate the import and use of mobile phones in Nepal. Registering your phone's IMEI (International Mobile Equipment Identity) number is crucial to ensure your device operates legally on Nepali networks and to curb the grey market.</p>
            <h4>Why Register Your IMEI?</h4>
            <ul>
                <li><strong>Legal Compliance:</strong> Ensures your device is legally recognized and authorized for use in Nepal.</li>
                <li><strong>Security:</strong> Helps track stolen or lost devices.</li>
                <li><strong>Network Access:</strong> Unregistered phones may eventually be blocked from using Nepali telecom services.</li>
                <li><strong>Consumer Protection:</strong> Ensures you are using legitimate devices.</li>
            </ul>
            <h4>What You'll Need:</h4>
            <ul>
                <li>Your smartphone's IMEI number(s) (dial *#06# to find).</li>
                <li>A valid government-issued ID (e.g., Citizenship Card, Passport, National ID).</li>
                <li>Purchase invoice/receipt of the device (if recently purchased or imported).</li>
                <li>For individuals returning from abroad: Visa/Passport details.</li>
            </ul>
            <h4>Step-by-Step: How to Register IMEI in MDMS Nepal</h4>
            <p>Follow these instructions carefully to register your device:</p>
            <ol>
                <li><strong>Visit the Official MDMS Website:</strong> Open your web browser and go to the official MDMS registration portal: <a href="https://mdms.nta.gov.np/" target="_blank" rel="noopener noreferrer">https://mdms.nta.gov.np/</a>.</li>
                <li><strong>Click on "Register Your Device":</strong> On the homepage, locate and click the prominent "Register Your Device" button or link.</li>
                <li><strong>Choose Registration Type:</strong>
                    <ul>
                        <li>Select <strong>"Individual Registration"</strong> if you are registering a personal phone for your own use (e.g., bought from abroad, or a new purchase).</li>
                        <li>Select <strong>"Commercial Registration"</strong> if you are an importer or dealer. (This guide focuses on individual registration).</li>
                    </ul>
                </li>
                <li><strong>Fill in Individual Registration Details:</strong>
                    <ol type="a">
                        <li><strong>Personal Details:</strong> Enter your full name, permanent address, and contact number.</li>
                        <li><strong>ID Type & Number:</strong> Select your ID type (Citizenship Certificate, Passport, or National ID Card) and enter the corresponding ID number.</li>
                        <li><strong>Mobile Number:</strong> Provide your active mobile number.</li>
                        <li><strong>Device Details:</strong>
                            <ul>
                                <li>Enter the <strong>Brand</strong> and <strong>Model</strong> of your smartphone.</li>
                                <li>Enter the <strong>IMEI1</strong> (International Mobile Equipment Identity). You can find this by dialing *#06# on your phone.</li>
                                <li>If your phone is dual SIM, also enter the <strong>IMEI2</strong>.</li>
                            </ul>
                        </li>
                        <li><strong>Upload Documents:</strong>
                            <ul>
                                <li>Scan and upload a clear copy of your government-issued ID (front and back).</li>
                                <li>If you purchased the device recently or imported it, upload the <strong>purchase invoice/receipt</strong>.</li>
                                <li>If you are a Nepali returning from abroad, upload copies of your <strong>Passport and Visa pages</strong> (if applicable) with entry/exit stamps.</li>
                            </ul>
                        </li>
                        <li><strong>Declaration:</strong> Read the declaration and tick the box to confirm you agree to the terms.</li>
                        <li><strong>Submit:</strong> Click the "Submit" button.</li>
                    </ol>
                </li>
                <li><strong>Receive Registration Number:</strong> After submission, you will receive a unique registration number. Make sure to note this down or take a screenshot for future reference.</li>
                <li><strong>Await Approval:</strong> Your application will be reviewed by the NTA. You will be notified via SMS or email once your device's IMEI is successfully registered and approved.</li>
            </ol>
            <p>It is highly recommended to register your IMEI as soon as possible, especially for new devices or phones brought from outside Nepal, to avoid any potential service disruptions.</p>
        `, 
        tags: ["IMEI registration", "MDMS Nepal", "NTA", "smartphone", "Nepal tech", "device registration"] 
    },
    { id: 2, title: "Beyond Text: Harnessing the Whiteboard Feature in Note P@d", date: "2024-07-20", views: 1120, author: "Bishal Mishra", author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */ author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.", image: "https://nextdayanimations.com/wp-content/uploads/2022/12/why_whiteboard_videos_blog_post-fb.png", content: "Sometimes, words aren't enough. Visual thinking is crucial for brainstorming, mind-mapping, and problem-solving. Discover how Note P@d's integrated whiteboard feature can transform your workflow...", fullContent: "Sometimes, words aren't enough. Visual thinking is crucial for brainstorming, mind-mapping, and problem-solving. Discover how Note P@d's integrated whiteboard feature can transform your workflow. Learn tips for sketching out ideas, creating visual outlines, and collaborating more effectively. We’ll show you how to make the most of the drawing tools – varying colors and brush sizes – to bring your concepts to life, making complex ideas instantly understandable. Explore the use of the eraser tool for quick corrections and the clear canvas option for a fresh start. Consider how to save and export your whiteboard creations as PNG images for sharing, presentations, or later reference.", tags: ["whiteboard", "visual thinking", "drawing", "brainstorming", "Note Pad"] },
    { id: 3, title: "Conquer Your To-Do List: Effective Task Management with Note P@d", date: "2024-07-15", views: 1750, author: "Bishal Mishra", author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */ author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.", image: "https://images.ctfassets.net/lzny33ho1g45/4dBmz2qbCdUEQ8Z5Zr2jQH/86ea25e7ba44580d252b092f8a68dbd4/kanban", content: "A messy to-do list can feel overwhelming. This post dives into practical strategies for managing your tasks using Note P@d's dedicated To-Do List feature...", fullContent: "A messy to-do list can feel overwhelming. This post dives into practical strategies for managing your tasks using Note P@d's dedicated To-Do List feature. Learn about prioritizing tasks, breaking down large projects, and the psychological benefits of checking items off your list. We’ll explore how to use Note P@d to create a system that reduces stress and boosts your accomplishment levels. Discover techniques like creating actionable items and regularly reviewing your progress. The simple act of marking a task as complete provides a sense of achievement and momentum, encouraging further productivity.", tags: ["to-do list", "task management", "organization", "productivity", "Note Pad"] },
    { id: 5, title: "Your Privacy Matters: How Note P@d Protects Your Data Locally", date: "2024-07-05", views: 2100, author: "Bishal Mishra", author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */ author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.", image: "https://media.licdn.com/dms/image/v2/D4E12AQHg_nJFQiivgg/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1682504783369?e=2147483647&v=beta&t=V6mZOMfpK7IKPasLUGnZBRacpl6_9KF3G3K5jgPmqxI", content: "Your notes should remain private. Note P@d is built with a strong focus on privacy. This post details how your data is stored locally, never transmitted to a server by default...", fullContent: "Your notes are your thoughts, and they should remain private. Note P@d is built with a strong focus on user privacy. This post details how your data is stored locally in your browser's localStorage for anonymous users, a design choice that means it's never transmitted to any external server by default and remains completely on your device. Learn about the security implications of this local-first approach. Understand that this also means responsibility rests with you to back up important data (e.g., via PDF export) if you're not using account-based sync features, as clearing browser data will erase local notes. For account holders, data is handled as per our comprehensive Privacy Policy.", tags: ["privacy", "security", "local storage", "data protection", "Note Pad"] },
    { id: 10, title: "Class 12 (XII) Result for 2081/2082: Check Your +2 Result!", date: "2024-07-01", views: 1874, author: "Bishal Mishra", author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */ author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.", image: "https://i.ibb.co/ycvw4J0g/class-12-results.png", content: "The National Examination Board (NEB), Nepal, has officially published the Class 12 results for the academic year 2081/2082. Thousands of students who appeared in the +2 board exams can now access their results online.", fullContent: `<p>These results reflect not only individual performance but also serve as a gateway to higher education and future career paths. Whether you are a regular or partial student, the result is equally important in shaping your academic future.</p><p>This year, NEB has made it convenient for students to check their results using multiple digital platforms. The primary method is online result checking, where students just need to enter their symbol number and date of birth on the designated websites. Due to high traffic, some servers may slow down, so having multiple options is very helpful. Make sure you double-check your credentials while entering the information to avoid errors.
<p>In addition to the official NEB result portal, other popular educational and telecom partner sites are also hosting the result. These portals provide instant access to the marksheet, including subject-wise grades and GPA. Students are advised to keep a copy of their result for future use, especially for university applications, scholarships, and other academic planning.<br><br> <a href="https://neb.ntc.net.np" target="_blank" rel="noopener noreferrer" class="see-result-btn">Click to check +2 Results 2081/82</a></p><p>We at bishalmishra.com have provided a compiled list of trusted and verified websites to check your Class 12 NEB result easily. Simply visit any of the links below and follow the instructions on the page. Best of luck to all the students — may this result open the door to your dreams and success!

</p><ul><li><a href="https://www.see.gov.np/" target="_blank">Official SEE Board: www.see.gov.np</a></li><li><a href="https://www.neb.gov.np/" target="_blank">NEB Website: www.neb.gov.np</a></li><li><a href="http://www.see.ntc.net.np/" target="_blank">NTC Result Portal: www.see.ntc.net.np</a></li><li><a href="https://see.edusanjal.com/" target="_blank">Edusanjal: see.edusanjal.com</a></li></ul><p>Congratulations to all students! We wish you all the very best for your future academic endeavors.</p>`, tags: ["SEE result", "Class 12", "NEB", "Nepal education", "results 2081/82"] },
    { id: 6, title: "Class 10 (SEE) Result for 2081/2082: Check Your SEE Result!", date: "2025-07-01", views: 1574, author: "Bishal Mishra", author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */ author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.", image: "https://techsathi.com/wp-content/uploads/2022/07/SEE-Result-1-702x459.jpg", content: "The moment you've been eagerly awaiting is finally here! The National Examination Board (NEB) is set to release the Class 10 Secondary Education Examination (SEE) results...", fullContent: `<p>The moment you've been eagerly awaiting is finally here! The National Examination Board (NEB) is set to release the Class 10 Secondary Education Examination (SEE) results for the academic year 2081/2082. This guide will walk you through various methods to check your results quickly and easily.</p><p>Students, parents, and guardians can now access the full mark sheets and individual subject grades. Ensure you have your symbol number and date of birth ready to retrieve your results.<br><br> <a href="https://see.ntc.net.np/results/grade" target="_blank" rel="noopener noreferrer" class="see-result-btn">Click to check SEE Results 2081/82</a></p><p>We have compiled a comprehensive list of websites where you can conveniently check your SEE result 2081:</p><ul><li><a href="https://www.see.gov.np/" target="_blank">Official SEE Board: www.see.gov.np</a></li><li><a href="https://www.neb.gov.np/" target="_blank">NEB Website: www.neb.gov.np</a></li><li><a href="http://www.see.ntc.net.np/" target="_blank">NTC Result Portal: www.see.ntc.net.np</a></li><li><a href="https://see.edusanjal.com/" target="_blank">Edusanjal: see.edusanjal.com</a></li></ul><p>Congratulations to all students! We wish you all the very best for your future academic endeavors.</p>`, tags: ["SEE result", "Class 10", "NEB", "Nepal education", "results 2081/82"] },
    { id: 7, title: "Organizing Your Life: From Daily Chores to Long-Term Goals", date: "2024-06-29", views: 1890, author: "Bishal Mishra", author_pic: "https://i.imgur.com/kR1k1jU.png", /* Example placeholder */ author_bio: "Bishal Mishra is the founder of Note Pad, a web developer, and a tech enthusiast passionate about making complex technology accessible. He frequently shares insights on productivity, web development, and digital tools.", image: "https://images.unsplash.com/photo-1542626991-cbc4e32524cc?w=600&auto=format&fit=crop&q=60", content: "Life can get complicated. Juggling daily tasks, weekly errands, and long-term ambitions requires a solid system. See how Note P@d can be the central hub for your entire life...", fullContent: "Life can get complicated. Juggling daily tasks, weekly errands, and long-term ambitions requires a solid system. Use Note P@d's to-do list for your daily groceries and chores. Create a separate note for your weekly meal plan. Use the whiteboard to map out your 5-year career goals. By creating dedicated notes and lists for different areas of your life (Personal, Work, Health, etc.), you can bring clarity and order to the chaos. This post provides a step-by-step guide to building a life organization system within Note P@d, helping you stay on track and achieve your dreams.", tags: ["life organization", "goal setting", "planning", "task management", "Note Pad"] }
];

// --- JS Functions ---
function filterBlogPosts(query) { 
    const searchTerm = query.toLowerCase().trim(); 
    document.querySelectorAll('.blog-post').forEach(postElement => { 
        const title = postElement.querySelector('h4 a').textContent.toLowerCase(); 
        const content = (postElement.querySelector('.blog-content-short')?.textContent.toLowerCase() || '') + (postElement.querySelector('.blog-content-full')?.textContent.toLowerCase() || ''); 
        const postTags = blogPostsData.find(p => `blog-${p.id}` === postElement.id)?.tags.join(' ').toLowerCase() || ''; 
        postElement.style.display = (title.includes(searchTerm) || content.includes(searchTerm) || postTags.includes(searchTerm)) ? 'block' : 'none'; 
    }); 
}

function filterBlogPostsByTag(tag) { 
    const blogMainHeading = document.getElementById('blog-main-heading'); 
    if (blogMainHeading) blogMainHeading.classList.add('hidden'); 
    
    let backButton = document.getElementById('back-to-blog-list-btn'); 
    const postsContainer = document.getElementById('blog-posts-container'); 
    
    if (!backButton && postsContainer) { 
        backButton = document.createElement('button'); 
        backButton.id = 'back-to-blog-list-btn'; 
        backButton.textContent = '← Back to All Posts'; 
        backButton.className = 'read-more-btn'; 
        backButton.style.marginBottom = '20px'; 
        backButton.onclick = showBlogList; 
        postsContainer.insertBefore(backButton, postsContainer.firstChild); 
    } 
    
    const searchTerm = tag.toLowerCase().trim(); 
    document.querySelectorAll('.blog-post').forEach(postElement => { 
        const postData = blogPostsData.find(p => `blog-${p.id}` === postElement.id); 
        const postTags = postData ? postData.tags.map(t => t.toLowerCase()) : []; 
        postElement.style.display = postTags.includes(searchTerm) ? 'block' : 'none'; 
    }); 
    if (postsContainer) postsContainer.scrollIntoView({ behavior: 'smooth' }); 
}

function showBlogList() { 
    const blogMainHeading = document.getElementById('blog-main-heading'); 
    if (blogMainHeading) blogMainHeading.classList.remove('hidden'); 
    const backButton = document.getElementById('back-to-blog-list-btn'); 
    if (backButton) backButton.remove(); 
    document.querySelectorAll('.blog-post').forEach(postElement => { 
        postElement.style.display = 'block'; 
        // Also ensure full content and extra sections are hidden when returning to list view
        postElement.querySelector('.blog-content-short').style.display = 'block';
        postElement.querySelector('.blog-content-full').style.display = 'none';
        postElement.querySelector('.read-more-btn').textContent = 'Read More →';
        postElement.querySelector('.comments-section').style.display = 'none';
        const authorBox = postElement.querySelector('.author-box');
        if (authorBox) authorBox.style.display = 'none';
        const relatedPostsSection = postElement.querySelector('.related-posts-section');
        if (relatedPostsSection) relatedPostsSection.style.display = 'none';
        const feedbackSection = postElement.querySelector('.feedback-section');
        if (feedbackSection) feedbackSection.style.display = 'none';
        const blogToc = postElement.querySelector('.blog-toc');
        if (blogToc) blogToc.remove(); // Remove TOC element when collapsing
    }); 
}

// NEW: Calculate Reading Time
function getReadingTime(text) {
    const wordsPerMinute = 200; // Average reading speed
    const textWithoutHtml = text.replace(/<[^>]*>?/gm, ''); // Strip HTML tags
    const wordCount = textWithoutHtml.split(/\s+/).filter(word => word.length > 0).length;
    const minutes = Math.ceil(wordCount / wordsPerMinute);
    return minutes === 0 ? "Less than 1 min" : `${minutes} min read`;
}

// NEW: Update Reading Progress Bar
function updateReadingProgressBar() {
    const progressBar = document.getElementById('reading-progress-bar');
    if (!progressBar) return;

    // Get the main content area for calculation
    const mainContent = document.getElementById('blog-posts-container'); 
    if (!mainContent) return;

    const mainContentHeight = mainContent.scrollHeight;
    const viewportHeight = window.innerHeight;
    const scrollTop = window.scrollY || document.documentElement.scrollTop;

    // Calculate how much of the main content is visible relative to the viewport
    const totalScrollableHeight = mainContentHeight - viewportHeight + mainContent.offsetTop;

    if (totalScrollableHeight <= 0) { // Content is shorter than viewport or not scrollable
        progressBar.style.width = '100%'; 
        return;
    }

    const scrolledRelative = scrollTop - mainContent.offsetTop;
    const progress = Math.min(100, Math.max(0, (scrolledRelative / totalScrollableHeight) * 100));
    progressBar.style.width = `${progress}%`;
}


function toggleBlogContent(postId) { 
    const postElement = document.getElementById(`blog-${postId}`); 
    if (!postElement) return; 

    const contentShort = postElement.querySelector('.blog-content-short');
    const contentFullContainer = postElement.querySelector('.blog-content-full'); // This is the container for full content
    const readMoreBtn = postElement.querySelector('.read-more-btn');
    const commentsSection = postElement.querySelector('.comments-section');
    const authorBox = postElement.querySelector('.author-box');
    const relatedPostsSection = postElement.querySelector('.related-posts-section');
    const feedbackSection = postElement.querySelector('.feedback-section');
    let blogToc = postElement.querySelector('.blog-toc');

    const isExpanded = contentFullContainer.style.display === 'block'; 

    if (isExpanded) {
        // Collapse state
        contentFullContainer.style.display = 'none';
        contentShort.style.display = 'block';
        readMoreBtn.textContent = 'Read More →';
        if (commentsSection) commentsSection.style.display = 'none'; 
        if (authorBox) authorBox.style.display = 'none';
        if (relatedPostsSection) relatedPostsSection.style.display = 'none';
        if (feedbackSection) feedbackSection.style.display = 'none';
        if (blogToc) blogToc.remove(); // Remove TOC element when collapsing
        // Reset full content HTML to prevent duplicate IDs if it was previously dynamically loaded
        contentFullContainer.innerHTML = '';
    } else {
        // Expand state
        contentFullContainer.style.display = 'block';
        contentShort.style.display = 'none';
        readMoreBtn.textContent = 'Show Less ←';

        // Find the full content data
        const postData = blogPostsData.find(p => p.id === postId);
        if (!postData) return;

        // **CRITICAL: Generate full content and TOC dynamically ON EXPAND**
        // 1. Set the full content HTML
        contentFullContainer.innerHTML = postData.fullContent;

        // 2. Generate TOC AFTER content is in DOM (or a temp DOM fragment)
        const headings = contentFullContainer.querySelectorAll('h4, h5');
        let tocHtml = '';
        if (headings.length > 0) {
            tocHtml = `
                <div class="blog-toc">
                    <h6>Table of Contents</h6>
                    <ul>
            `;
            headings.forEach((heading, index) => {
                const headingText = heading.textContent;
                // Generate a unique ID for each heading within this post
                const headingId = `post-${postId}-heading-${index}`;
                heading.id = headingId; // Assign ID to the actual heading in the DOM
                const isH5 = heading.tagName.toLowerCase() === 'h5' ? ' h5-level' : '';
                tocHtml += `<li class="${isH5}"><a href="#${headingId}">${headingText}</a></li>`;
            });
            tocHtml += `</ul></div>`;
        }
        
        // Prepend TOC to the full content container
        if (tocHtml) {
            const tocElement = document.createElement('div');
            tocElement.innerHTML = tocHtml;
            contentFullContainer.prepend(tocElement.firstChild); // Insert the generated TOC div
        }

        // Show other sections
        if (commentsSection) commentsSection.style.display = 'block';
        if (authorBox) authorBox.style.display = 'flex'; // Use flex for author box
        if (relatedPostsSection) relatedPostsSection.style.display = 'block';
        if (feedbackSection) feedbackSection.style.display = 'block';
        
        // NEW: Populate Related Posts and feedback when expanded
        populateRelatedPosts(postId);
        loadFeedbackStatus(postId);

        // Scroll to the top of the expanded post for better UX
        setTimeout(() => { 
            postElement.scrollIntoView({ behavior: 'smooth', block: 'start' }); 
        }, 100); 
    } 
}

function scrollToAndExpandPost(postId) { 
    const postElement = document.getElementById(`blog-${postId}`); 
    if (!postElement) return; 

    // Ensure it's expanded if not already
    const contentFullContainer = postElement.querySelector('.blog-content-full');
    if (contentFullContainer.style.display !== 'block') { 
        toggleBlogContent(postId); // This will handle showing all sections
    }
    
    // Scroll to the top of the post after it's expanded
    setTimeout(() => { 
        postElement.scrollIntoView({ behavior: 'smooth', block: 'start' }); 
    }, 100); 
}

function populateBlogSidebar() { 
    const recentPostsList = document.getElementById('sidebar-recent-posts'); 
    const tagsCloud = document.getElementById('sidebar-tags-cloud'); 
    if (!recentPostsList || !tagsCloud) return; 
    
    const sortedPosts = [...blogPostsData].sort((a, b) => new Date(b.date) - new Date(a.date)); 
    
    const recentPostsHtml = sortedPosts.slice(0, 5).map(post => 
        `<li><a href="#blog-${post.id}" onclick="event.preventDefault(); scrollToAndExpandPost(${post.id});">${post.title}</a></li>`
    ).join(''); 
    recentPostsList.innerHTML = recentPostsHtml; 
    
    const allTags = new Set(blogPostsData.flatMap(post => post.tags || [])); 
    const tagsHtml = Array.from(allTags).sort().map(tag => 
        `<a href="#" onclick="filterBlogPostsByTag('${tag.replace(/'/g, "\\'")}'); return false;">${tag}</a>`
    ).join(''); 
    tagsCloud.innerHTML = tagsHtml; 
}

function loadBlogPosts() { 
    if (!blogList) return; 
    blogList.innerHTML = ''; 
    if (blogPostsData.length === 0) { 
        blogList.innerHTML = "<p>No blog posts available.</p>"; 
        return; 
    } 
    const sortedBlogPosts = [...blogPostsData].sort((a, b) => new Date(b.date) - new Date(a.date)); 
    sortedBlogPosts.forEach(post => { 
        const readingTime = getReadingTime(post.fullContent); // NEW: Get reading time
        
        // NEW: Social Share Buttons
        const shareTitle = encodeURIComponent(post.title);
        const shareUrl = encodeURIComponent(`https://bishalmishra.com/blogs.html#blog-${post.id}`);
        const shareButtonsHtml = `
            <div class="share-buttons">
                <a href="https://www.facebook.com/sharer/sharer.php?u=${shareUrl}" target="_blank" rel="noopener noreferrer" class="facebook" aria-label="Share on Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="https://twitter.com/intent/tweet?url=${shareUrl}&text=${shareTitle}" target="_blank" rel="noopener noreferrer" class="twitter" aria-label="Share on Twitter"><i class="fab fa-twitter"></i></a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&url=${shareUrl}&title=${shareTitle}" target="_blank" rel="noopener noreferrer" class="linkedin" aria-label="Share on LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="mailto:?subject=${shareTitle}&body=Check out this article: ${shareUrl}" class="email" aria-label="Share via Email"><i class="fas fa-envelope"></i></a>
                <a href="https://api.whatsapp.com/send?text=${shareTitle}%20${shareUrl}" target="_blank" rel="noopener noreferrer" class="whatsapp" aria-label="Share on WhatsApp"><i class="fab fa-whatsapp"></i></a>
            </div>
        `;

        // NEW: Author Box
        const authorPic = post.author_pic || `https://ui-avatars.com/api/?name=${encodeURIComponent(post.author)}&background=random&color=fff`;
        const authorBio = post.author_bio || `The author, ${post.author}, is a passionate writer and contributor to the Note Pad blog, sharing valuable insights on various topics.`;
        const authorBoxHtml = `
            <div class="author-box" style="display: none;">
                <img src="${authorPic}" alt="${post.author}">
                <div class="author-info">
                    <h5>About ${post.author}</h5>
                    <p>${authorBio}</p>
                    <p><a href="https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer">Connect on Facebook</a></p>
                </div>
            </div>
        `;

        // NEW: Helpful Feedback Section
        const feedbackSectionHtml = `
            <div class="feedback-section" style="display: none;">
                <p>Was this article helpful?</p>
                <div class="feedback-buttons">
                    <button class="yes" onclick="handleFeedback(event, ${post.id}, 'yes')">Yes <span id="feedback-yes-${post.id}"></span></button>
                    <button class="no" onclick="handleFeedback(event, ${post.id}, 'no')">No <span id="feedback-no-${post.id}"></span></button>
                </div>
            </div>
        `;

        // NEW: Related Posts Section (initially empty, populated on expand)
        const relatedPostsSectionHtml = `
            <div class="related-posts-section" style="display: none;">
                <h5>Related Posts</h5>
                <ul class="related-posts-list" id="related-posts-${post.id}">
                    <!-- Related posts will be injected here -->
                </ul>
            </div>
        `;

        const blogPostDiv = document.createElement('div'); 
        blogPostDiv.id = `blog-${post.id}`; 
        blogPostDiv.classList.add('blog-post'); 
        blogPostDiv.innerHTML = `
            <h4><a href="#blog-${post.id}" onclick="event.preventDefault(); toggleBlogContent(${post.id});">${post.title}</a></h4>
            <div class="blog-post-meta">
                <span><i class="fas fa-calendar-alt"></i> ${post.date}</span>
                <span><i class="fas fa-user"></i> By: ${post.author}</span>
                <span><i class="fas fa-eye"></i> ${post.views} views</span>
                <span><i class="fas fa-clock"></i> ${readingTime}</span> <!-- NEW: Reading Time -->
            </div>
            ${post.image ? `<img src="${post.image}" alt="${post.title}" class="blog-post-image" loading="lazy" width="600" height="350">` : ''}
            <div class="blog-post-content">
                <div class="blog-content-short">${post.content}</div>
                <div class="blog-content-full">
                    <!-- Full content and TOC will be dynamically loaded/modified here on expand -->
                </div>
            </div>
            <button class="read-more-btn" onclick="toggleBlogContent(${post.id});">Read More →</button>
            ${shareButtonsHtml} <!-- NEW: Share Buttons -->
            ${authorBoxHtml} <!-- NEW: Author Box -->
            ${feedbackSectionHtml} <!-- NEW: Feedback Section -->
            ${relatedPostsSectionHtml} <!-- NEW: Related Posts Section -->
            <div class="comments-section">
                <h5>Comments</h5>
                <ul class="comment-list" id="comment-list-${post.id}"></ul>
                <form class="comment-form" onsubmit="handleCommentSubmit(event, ${post.id})">
                    <input type="text" name="commenter-name" placeholder="Your Name" required>
                    <textarea name="comment-text" rows="4" placeholder="Write your comment..." required></textarea>
                    <button type="submit">Post Comment</button>
                </form>
            </div>
        `; 
        const postSchema = { "@context": "https://schema.org", "@type": "BlogPosting", "mainEntityOfPage": { "@type": "WebPage", "@id": `https://bishalmishra.com/blogs.html#blog-${post.id}` }, "headline": post.title, "description": post.content.replace(/<[^>]*>?/gm, ''), "image": post.image, "author": { "@type": "Person", "name": post.author, "url": "https://www.facebook.com/share/166miohhL6/?mibextid=wwXIfr" }, "publisher": { "@type": "Organization", "name": "Note Pad by Bishal Mishra", "logo": { "@type": "ImageObject", "url": "https://bishalmishra.com/images/favicon.png" } }, "datePublished": post.date, "dateModified": post.date }; 
        const schemaScript = document.createElement('script'); 
        schemaScript.type = 'application/ld+json'; 
        schemaScript.textContent = JSON.stringify(postSchema); 
        blogPostDiv.appendChild(schemaScript); 
        blogList.appendChild(blogPostDiv); 
        loadComments(post.id); 
    }); 
}

// --- NEW COMMENT FUNCTIONS ---
function loadComments(postId) { 
    const commentList = document.getElementById(`comment-list-${postId}`); 
    if (!commentList) return; 
    const comments = JSON.parse(localStorage.getItem(`comments-post-${postId}`) || '[]'); 
    commentList.innerHTML = ''; 
    comments.forEach(comment => { 
        const commentEl = createCommentElement(comment); 
        commentList.prepend(commentEl); 
    }); 
}

function createCommentElement(comment) { 
    const li = document.createElement('li'); 
    li.className = 'comment-item'; 
    // Properly escape user-submitted content to prevent XSS
    const escapedName = comment.name.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;"); 
    const escapedText = comment.text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;"); 
    li.innerHTML = `<div class="comment-meta">${escapedName} <span>${new Date(comment.date).toLocaleString()}</span></div><p class="comment-text">${escapedText}</p>`; 
    return li; 
}

function handleCommentSubmit(event, postId) { 
    event.preventDefault(); 
    const form = event.target; 
    const nameInput = form.querySelector('input[name="commenter-name"]'); 
    const textInput = form.querySelector('textarea[name="comment-text"]'); 
    const name = nameInput.value.trim(); 
    const text = textInput.value.trim(); 
    if (!name || !text) { 
        alert('Please fill in both your name and comment.'); 
        return; 
    } 
    const newComment = { name: name, text: text, date: new Date().toISOString() }; 
    const comments = JSON.parse(localStorage.getItem(`comments-post-${postId}`) || '[]'); 
    comments.push(newComment); 
    localStorage.setItem(`comments-post-${postId}`, JSON.stringify(comments)); 
    const commentList = document.getElementById(`comment-list-${postId}`); 
    const commentEl = createCommentElement(newComment); 
    commentList.prepend(commentEl); // Add new comment to the top
    form.reset(); 
}

// NEW: Related Posts Functionality
function populateRelatedPosts(currentPostId) {
    const currentPost = blogPostsData.find(p => p.id === currentPostId);
    if (!currentPost) return;

    const relatedPostsContainer = document.getElementById(`related-posts-${currentPostId}`);
    if (!relatedPostsContainer) return;

    // Filter out the current post and find posts with common tags
    const potentialRelated = blogPostsData.filter(post => 
        post.id !== currentPostId && 
        currentPost.tags.some(tag => post.tags.includes(tag))
    );

    // Sort by relevance (number of common tags) then by date
    potentialRelated.sort((a, b) => {
        const commonTagsA = currentPost.tags.filter(tag => a.tags.includes(tag)).length;
        const commonTagsB = currentPost.tags.filter(tag => b.tags.includes(tag)).length;
        if (commonTagsA !== commonTagsB) {
            return commonTagsB - commonTagsA; // More common tags first
        }
        return new Date(b.date) - new Date(a.date); // Then by most recent
    });

    const relatedHtml = potentialRelated.slice(0, 3).map(post => `
        <li>
            <a href="#blog-${post.id}" onclick="event.preventDefault(); scrollToAndExpandPost(${post.id});">
                ${post.title}
            </a>
            <small><i class="fas fa-calendar-alt"></i> ${post.date}</small>
        </li>
    `).join('');

    relatedPostsContainer.innerHTML = relatedHtml.length > 0 ? relatedHtml : '<li>No related posts found.</li>';
}

// NEW: Helpful Feedback Functionality
function handleFeedback(event, postId, type) {
    const feedbackKey = `feedback-post-${postId}`;
    let feedback = JSON.parse(localStorage.getItem(feedbackKey) || '{}');

    // Check if user has already voted for this post (local storage only)
    if (feedback.voted) {
        alert('You have already provided feedback for this article!');
        return;
    }

    feedback.yes = feedback.yes || 0;
    feedback.no = feedback.no || 0;

    if (type === 'yes') {
        feedback.yes++;
    } else {
        feedback.no++;
    }
    feedback.voted = true; // Mark as voted

    localStorage.setItem(feedbackKey, JSON.stringify(feedback));
    updateFeedbackDisplay(postId, feedback);

    // Disable buttons after vote
    const postElement = document.getElementById(`blog-${postId}`);
    const yesBtn = postElement.querySelector(`.feedback-buttons .yes`);
    const noBtn = postElement.querySelector(`.feedback-buttons .no`);
    if (yesBtn) yesBtn.classList.add('clicked');
    if (noBtn) noBtn.classList.add('clicked');
}

function loadFeedbackStatus(postId) {
    const feedbackKey = `feedback-post-${postId}`;
    const feedback = JSON.parse(localStorage.getItem(feedbackKey) || '{}');
    updateFeedbackDisplay(postId, feedback);

    // Disable buttons if already voted
    const postElement = document.getElementById(`blog-${postId}`);
    const yesBtn = postElement.querySelector(`.feedback-buttons .yes`);
    const noBtn = postElement.querySelector(`.feedback-buttons .no`);
    if (yesBtn && noBtn) { // Ensure buttons exist before trying to modify
        if (feedback.voted) {
            yesBtn.classList.add('clicked');
            noBtn.classList.add('clicked');
        } else {
            yesBtn.classList.remove('clicked');
            noBtn.classList.remove('clicked');
        }
    }
}

function updateFeedbackDisplay(postId, feedback) {
    const yesSpan = document.getElementById(`feedback-yes-${postId}`);
    const noSpan = document.getElementById(`feedback-no-${postId}`);
    if (yesSpan) yesSpan.textContent = `(${feedback.yes || 0})`;
    if (noSpan) noSpan.textContent = `(${feedback.no || 0})`;
}
</script>
</body>
</html>